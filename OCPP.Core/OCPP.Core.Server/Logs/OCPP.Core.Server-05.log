warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T17:00:02.0519357+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T17:00:03.8841093+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T17:00:05.2458797+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T17:00:05.2460047+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T17:00:05.2472611+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T17:00:05.2473134+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T17:00:05.2505605+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:05.3081379+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:05.3131121+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=07df70fba37e427d920bcc172d6af23c / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:00:05.3217514+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:00:05.3678863+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:00:05.3679279+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:00:05.3742891+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:05.6009707+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"07df70fba37e427d920bcc172d6af23c",{"status":"Accepted","currentTime":"2025-06-26T17:00:05.3679315+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0396367+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0402857+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0406576+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"6f69281e990441aa824f5d4273049444","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0444283+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0450456+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=6f69281e990441aa824f5d4273049444 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:00:09.0561901+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0591329+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0593779+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6f69281e990441aa824f5d4273049444 / Action=StartTransaction)
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:00:09.0742667+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T17:02:00.8030108+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T17:02:03.0241917+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T17:02:04.3292507+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T17:02:04.3295001+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T17:02:04.3316916+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T17:02:04.3317858+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T17:02:04.3354500+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:04.3958002+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:04.3989268+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6f69281e990441aa824f5d4273049444 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:02:04.4080419+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:02:04.4603150+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:02:04.4604170+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:02:04.4668184+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:04.7041523+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"6f69281e990441aa824f5d4273049444",{"status":"Accepted","currentTime":"2025-06-26T17:02:04.4604256+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1582863+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1583658+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1584998+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"0d2ccf463083461398db13e4d8dd1a07","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1620050+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1622420+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=0d2ccf463083461398db13e4d8dd1a07 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:02:07.1745648+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1786392+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1788421+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=0d2ccf463083461398db13e4d8dd1a07 / Action=StartTransaction)
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:02:07.1945133+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Invalid cast from 'System.DateTime' to 'System.DateTimeOffset'.
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T17:03:55.4240617+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T17:03:56.7630236+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T17:03:58.1102808+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T17:03:58.1106318+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T17:03:58.1123652+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T17:03:58.1124294+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T17:03:58.1160306+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:03:58.1751676+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:03:58.1780007+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=0d2ccf463083461398db13e4d8dd1a07 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:03:58.1863885+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:03:58.2341588+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:03:58.2342037+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:03:58.2391650+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:03:58.4740591+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"0d2ccf463083461398db13e4d8dd1a07",{"status":"Accepted","currentTime":"2025-06-26T17:03:58.2342083+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.0989340+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.0990430+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.0992361+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"2922bb1452024fef8e828abcb0dd8f86","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.1037655+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.1039692+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=2922bb1452024fef8e828abcb0dd8f86 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:03.1170995+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.1203397+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.1210793+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2922bb1452024fef8e828abcb0dd8f86 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:03.1436284+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:03.1588682+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T17:04:46.8252529+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T17:04:46.9964631+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T17:04:47.8654948+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T17:04:49.1862741+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T17:04:49.1864350+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T17:04:49.1876149+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T17:04:49.1876713+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T17:04:49.1931869+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:49.2566540+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:49.2608823+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2922bb1452024fef8e828abcb0dd8f86 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:49.2710398+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:49.3272768+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:49.3273234+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:49.3350176+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:49.5768686+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"2922bb1452024fef8e828abcb0dd8f86",{"status":"Accepted","currentTime":"2025-06-26T17:04:49.3273292+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:52.6152067+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:52.6152930+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:52.6154506+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"628f43521e6a479bab81a66c056ee52e","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:52.6179083+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:52.6181037+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=628f43521e6a479bab81a66c056ee52e / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:52.6308407+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:52.6344402+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:52.6346220+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=628f43521e6a479bab81a66c056ee52e / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:52.6525730+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:52.6586043+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:52.6587134+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:52.7504588+07:00
      StartTransaction => Charge tag='B4A63CDF' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:53.1283592+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:53.2643581+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:04:53.4421293+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:04:53.4858158+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"628f43521e6a479bab81a66c056ee52e",{"idTagInfo":{"expiryDate":"2026-06-26T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":250626000004}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:05:14.1277890+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=3001
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T17:15:05.7118868+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T17:15:05.8760313+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T17:15:09.6788189+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T17:15:10.8939290+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T17:15:10.8940598+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T17:15:10.8953761+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T17:15:10.8954552+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T17:15:10.9039940+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:11.0010726+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:11.0049306+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=628f43521e6a479bab81a66c056ee52e / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:11.0107276+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:11.0810503+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:11.0811269+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:11.0887000+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:11.3169672+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"628f43521e6a479bab81a66c056ee52e",{"status":"Accepted","currentTime":"2025-06-26T17:15:11.0811353+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:15.1610008+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:15.1610627+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:15.1611632+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"52d4cccfb2f0450f9be201f2f5ca93b3","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:15.1639877+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:15.1641679+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=52d4cccfb2f0450f9be201f2f5ca93b3 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:15.1739121+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:15.1773472+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:15.1775076+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=52d4cccfb2f0450f9be201f2f5ca93b3 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:15.1962986+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:15.2039594+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:15.2040167+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:15.3034996+07:00
      StartTransaction => Charge tag='B4A63CDF' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:15.7572837+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:15.9768222+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:15:16.1749756+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:15:16.2171870+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"52d4cccfb2f0450f9be201f2f5ca93b3",{"idTagInfo":{"expiryDate":"2026-06-26T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":250626000004}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:31:23.8891033+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=3001
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T17:59:31.6333585+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T17:59:31.7991788+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T17:59:53.4891657+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T17:59:54.7387319+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T17:59:54.7388835+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T17:59:54.7399744+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T17:59:54.7400143+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T17:59:54.7441929+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:59:54.8005109+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:59:54.8038676+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=996c51ad0aa74c2d85c348910149d068 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:59:54.8084962+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:59:54.8519888+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:59:54.8520409+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T17:59:54.8584419+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T17:59:55.0448391+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"996c51ad0aa74c2d85c348910149d068",{"status":"Accepted","currentTime":"2025-06-26T17:59:54.8520463+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.2674664+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.2675386+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.2676319+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"0680a3ced94a4a6caf1368582d686624","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.2700655+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.2703494+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=0680a3ced94a4a6caf1368582d686624 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:00:40.2824771+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.2869099+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.2870279+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=0680a3ced94a4a6caf1368582d686624 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:00:40.2915026+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:00:40.3069888+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T18:02:41.2038726+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T18:02:41.4857641+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T18:02:43.5919664+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T18:02:44.9340047+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T18:02:44.9341994+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T18:02:44.9357263+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T18:02:44.9357918+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T18:02:44.9398418+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:45.0064252+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:45.0097945+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=0680a3ced94a4a6caf1368582d686624 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:02:45.0152448+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:02:45.0773137+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:02:45.0773871+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:02:45.0851121+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:45.3195319+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"0680a3ced94a4a6caf1368582d686624",{"status":"Accepted","currentTime":"2025-06-26T18:02:45.0773926+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5503688+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5504132+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5504881+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"5d853bf3d4104e8e8e6dde454e476331","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5532899+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5536562+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=5d853bf3d4104e8e8e6dde454e476331 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:02:49.5664403+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5694464+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5695992+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=5d853bf3d4104e8e8e6dde454e476331 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:02:49.5734129+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:02:49.5860360+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T18:03:18.0082358+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T18:03:18.2019615+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T18:03:24.0632504+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T18:03:25.3369168+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T18:03:25.3371186+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T18:03:25.3384326+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T18:03:25.3384922+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T18:03:25.3453435+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:25.4107239+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:25.4152843+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=5d853bf3d4104e8e8e6dde454e476331 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:03:25.4212335+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:03:25.4756958+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:03:25.4757430+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:03:25.4831606+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:25.7231605+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"5d853bf3d4104e8e8e6dde454e476331",{"status":"Accepted","currentTime":"2025-06-26T18:03:25.4757553+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1114424+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1114939+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1115882+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"6657e89494a8408daca4ad79e0d4a94e","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1145866+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1148222+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=6657e89494a8408daca4ad79e0d4a94e / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:03:28.1288315+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1354060+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1355465+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6657e89494a8408daca4ad79e0d4a94e / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:03:28.1415555+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:03:28.1559674+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
info: OCPPMiddleware[0] @ 2025-06-26T18:04:36.4172970+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T18:04:36.5101484+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T18:04:36.5101730+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T18:04:36.5102949+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T18:04:36.5103038+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T18:04:36.5104816+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:04:36.5122512+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:04:36.5123650+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6657e89494a8408daca4ad79e0d4a94e / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:36.5131210+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:36.5136591+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:36.5136841+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:36.5142534+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:04:36.6918637+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"6657e89494a8408daca4ad79e0d4a94e",{"status":"Accepted","currentTime":"2025-06-26T18:04:36.5136863+07:00","interval":300}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:04:38.6277816+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 162 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:04:38.6279036+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6657e89494a8408daca4ad79e0d4a94e / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:38.6289084+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:38.6300748+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:38.6301077+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:38.7061700+07:00
      StartTransaction => Charge tag='B4A63CDF' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:39.0637593+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:39.1956449+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:04:39.3729404+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:04:39.4152759+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"6657e89494a8408daca4ad79e0d4a94e",{"idTagInfo":{"expiryDate":"2026-06-26T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":250626000005}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:15:21.7248099+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=3001
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T18:15:39.2250830+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T18:15:39.4193256+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T18:15:40.8279089+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T18:15:42.1267990+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T18:15:42.1270316+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T18:15:42.1291401+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T18:15:42.1292240+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T18:15:42.1332508+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:15:42.1950778+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:15:42.1984640+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6657e89494a8408daca4ad79e0d4a94e / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:15:42.2042574+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:15:42.2519824+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:15:42.2520250+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:15:42.2576621+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:15:42.4918685+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"6657e89494a8408daca4ad79e0d4a94e",{"status":"Accepted","currentTime":"2025-06-26T18:15:42.2520376+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0013280+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0013860+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0014900+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"6f04c477772d41de953c6c68c8bc637f","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0042554+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0044817+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=6f04c477772d41de953c6c68c8bc637f / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:16:02.0183296+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0219050+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0220974+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6f04c477772d41de953c6c68c8bc637f / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:16:02.0272250+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:16:02.0399561+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T18:20:49.7642763+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T18:20:49.9433221+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T18:20:52.0189806+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T18:20:53.2152816+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T18:20:53.2154525+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T18:20:53.2167221+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T18:20:53.2167696+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T18:20:53.2201832+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:53.2784798+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:53.2819800+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6f04c477772d41de953c6c68c8bc637f / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:20:53.2867814+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:20:53.3364011+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:20:53.3364475+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:20:53.3424258+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:53.5158898+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"6f04c477772d41de953c6c68c8bc637f",{"status":"Accepted","currentTime":"2025-06-26T18:20:53.3364514+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6423930+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6424737+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6426172+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"a550c8e4cd2e458789236a98a52ace50","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6457478+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6460152+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=a550c8e4cd2e458789236a98a52ace50 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:20:57.6565190+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6593508+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6594836+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a550c8e4cd2e458789236a98a52ace50 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:20:57.6634112+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:20:57.6784245+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T18:40:10.6900401+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T18:40:10.8649956+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T18:48:35.1570499+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T18:48:37.4358306+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T18:48:37.4360341+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T18:48:37.4372995+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T18:48:37.4373679+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T18:48:37.4414985+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:37.5051972+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:37.5080935+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a550c8e4cd2e458789236a98a52ace50 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:48:37.5131295+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:48:37.5654389+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:48:37.5654817+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:48:37.5729916+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:37.8293999+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"a550c8e4cd2e458789236a98a52ace50",{"status":"Accepted","currentTime":"2025-06-26T18:48:37.5654864+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.0918954+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.0919891+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.0921819+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"b4fd7fa7fd1a45a0a65d32e32d8afa54","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.0967870+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.0970770+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=b4fd7fa7fd1a45a0a65d32e32d8afa54 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:48:55.1190720+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.1272931+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.1274620+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=b4fd7fa7fd1a45a0a65d32e32d8afa54 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:48:55.1359148+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:48:55.1603182+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T18:52:45.4977150+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T18:52:45.6604178+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T18:52:46.9639178+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T18:52:48.3202157+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T18:52:48.3203369+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T18:52:48.3217715+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T18:52:48.3218523+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T18:52:48.3269351+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:48.4112419+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:48.4148015+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=b4fd7fa7fd1a45a0a65d32e32d8afa54 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:52:48.4198090+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:52:48.4895100+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:52:48.4895578+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:52:48.4959225+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:48.7265118+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"b4fd7fa7fd1a45a0a65d32e32d8afa54",{"status":"Accepted","currentTime":"2025-06-26T18:52:48.4895632+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.8897364+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.8898831+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.8900756+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"9b714d15a3c4400eb880257e4f09f920","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.8941018+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.8952008+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=9b714d15a3c4400eb880257e4f09f920 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:52:52.9099185+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.9135735+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.9137479+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=9b714d15a3c4400eb880257e4f09f920 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T18:52:52.9196922+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T18:52:52.9347826+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T19:04:50.7069065+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T19:04:50.8748721+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T19:04:54.6038924+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T19:04:55.8974065+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T19:04:55.8975587+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T19:04:55.8987801+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T19:04:55.8988258+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T19:04:55.9044883+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:04:55.9614712+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:04:55.9650579+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=9b714d15a3c4400eb880257e4f09f920 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:04:55.9711855+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:04:56.0214747+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:04:56.0215216+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:04:56.0287701+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:04:56.2503305+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"9b714d15a3c4400eb880257e4f09f920",{"status":"Accepted","currentTime":"2025-06-26T19:04:56.0215341+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.3620214+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.3620826+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.3621702+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"956b96fe21c144dbb5d09f1b0888260d","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.3652898+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.3656220+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=956b96fe21c144dbb5d09f1b0888260d / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:05:04.3837972+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.3900227+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.3901604+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=956b96fe21c144dbb5d09f1b0888260d / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:05:04.3950674+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:05:04.4098737+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T19:18:34.2979757+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T19:18:34.4609152+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T19:47:36.6708061+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T19:47:36.8429318+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T19:48:09.5514769+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T19:48:10.9355484+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T19:48:10.9356852+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T19:48:10.9368284+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T19:48:10.9368754+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T19:48:10.9400579+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:48:10.9926845+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:48:10.9964110+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=z316CGJ28IlwjDbyuETs3x4rPWTT5H0LEjDE / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:48:11.0011957+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:48:11.0518286+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:48:11.0519050+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T19:48:11.0579875+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:48:11.4159652+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"z316CGJ28IlwjDbyuETs3x4rPWTT5H0LEjDE",{"status":"Accepted","currentTime":"2025-06-26T19:48:11.0519093+07:00","interval":300}]
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T19:48:44.9976278+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : The connection was aborted because the server is shutting down and request processing didn't complete within the time specified by HostOptions.ShutdownTimeout.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T19:48:50.3166575+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T19:48:50.4795844+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T20:38:45.7813331+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T20:38:45.9572593+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T20:39:05.1510688+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T20:39:06.4182807+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T20:39:06.4185406+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T20:39:06.4198999+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T20:39:06.4199626+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T20:39:06.4233921+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:06.4835541+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:06.4875667+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=ZVq1TPuQwA3Ydyb8A3euAnn4WQVfHZEQSM4D / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:39:06.4932274+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:39:06.5486834+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:39:06.5488053+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:39:06.5560119+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:06.7846865+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"ZVq1TPuQwA3Ydyb8A3euAnn4WQVfHZEQSM4D",{"status":"Accepted","currentTime":"2025-06-26T20:39:06.5488126+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7088038+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7092895+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7094379+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"d29bfff4a9c1415d92a724f154cea3a4","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7124585+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7127361+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=d29bfff4a9c1415d92a724f154cea3a4 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:39:08.7230585+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7286868+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7289024+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=d29bfff4a9c1415d92a724f154cea3a4 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:39:08.7336844+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:39:08.7535770+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T20:43:24.7958887+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T20:43:24.9829996+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T20:43:26.5429261+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T20:43:27.8459256+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T20:43:27.8460578+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T20:43:27.8473382+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T20:43:27.8474224+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T20:43:27.8524124+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:27.9122766+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:27.9154322+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=d29bfff4a9c1415d92a724f154cea3a4 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:43:27.9220728+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:43:27.9750743+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:43:27.9751150+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:43:27.9812874+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:28.2159347+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"d29bfff4a9c1415d92a724f154cea3a4",{"status":"Accepted","currentTime":"2025-06-26T20:43:27.9751189+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.4770340+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.4771301+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.4773154+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"b52fb4096ecf47e0b8b0a64fc899c682","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.4810298+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.4816452+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=b52fb4096ecf47e0b8b0a64fc899c682 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:43:30.4965403+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.5025576+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.5029335+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=b52fb4096ecf47e0b8b0a64fc899c682 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:43:30.5097423+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:43:30.5255284+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T20:44:55.4427838+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T20:44:55.6082773+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T20:44:56.7396196+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T20:44:58.1619111+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T20:44:58.1620669+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T20:44:58.1633477+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T20:44:58.1633950+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T20:44:58.1670045+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:58.2381767+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:58.2423061+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=b52fb4096ecf47e0b8b0a64fc899c682 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:44:58.2483425+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:44:58.3022779+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:44:58.3023349+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:44:58.3096714+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:58.5508542+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"b52fb4096ecf47e0b8b0a64fc899c682",{"status":"Accepted","currentTime":"2025-06-26T20:44:58.3023399+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:59.9792622+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:59.9793600+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:59.9795206+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"05c1b3861d874767b495b35d7edf51e5","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:59.9831966+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:59.9837003+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=05c1b3861d874767b495b35d7edf51e5 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:44:59.9945443+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:59.9983339+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:44:59.9986526+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=05c1b3861d874767b495b35d7edf51e5 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T20:45:00.0044760+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T20:45:00.0286823+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T21:08:17.2339195+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T21:08:17.4408484+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T21:08:34.8832524+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:08:36.1362810+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:08:36.1364230+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:08:36.1376539+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:08:36.1377112+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:08:36.1419278+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:36.1928998+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:36.1959066+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=SShagBIYs1mYkvAeJfSHAs9u2jsLy4uIPT2B / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:36.2018537+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:36.2452586+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:36.2452996+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:36.2507962+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:36.4462981+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"SShagBIYs1mYkvAeJfSHAs9u2jsLy4uIPT2B",{"status":"Accepted","currentTime":"2025-06-26T21:08:36.2453045+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9287339+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9288418+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9290660+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"19cb185dd7b34c03b3926c7129c8abf1","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9329926+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9334776+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=19cb185dd7b34c03b3926c7129c8abf1 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:39.9443335+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9475493+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9479178+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=19cb185dd7b34c03b3926c7129c8abf1 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:39.9521360+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:39.9643996+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
info: OCPPMiddleware[0] @ 2025-06-26T21:08:48.0130616+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:08:48.1123767+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:08:48.1124022+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:08:48.1125341+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:08:48.1125429+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:08:48.1127532+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:48.1150976+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:48.1154398+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=19cb185dd7b34c03b3926c7129c8abf1 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:48.1162597+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:48.1168861+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:48.1169300+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:48.1178396+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:48.2958453+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"19cb185dd7b34c03b3926c7129c8abf1",{"status":"Accepted","currentTime":"2025-06-26T21:08:48.1169346+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.5940416+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.5940779+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.5941032+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"2d5964f509f94a298d59ec2dfa41c278","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.5954167+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.5956511+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=2d5964f509f94a298d59ec2dfa41c278 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:53.5968781+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.5983122+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.5988220+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2d5964f509f94a298d59ec2dfa41c278 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:08:53.5997226+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:08:53.6030876+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T21:14:06.2890061+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T21:14:06.4620034+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T21:14:35.7312198+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:14:36.9522163+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:14:36.9524522+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:14:36.9537097+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:14:36.9537685+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:14:36.9572087+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:14:37.0192226+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:14:37.0233321+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2d5964f509f94a298d59ec2dfa41c278 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:14:37.0284501+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:14:37.0765776+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:14:37.0766178+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:14:37.0826443+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:14:37.3386769+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"2d5964f509f94a298d59ec2dfa41c278",{"status":"Accepted","currentTime":"2025-06-26T21:14:37.076629+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:16:26.3112738+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=EndpointUnavailable
info: OCPPMiddleware[0] @ 2025-06-26T21:16:28.9376163+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:16:29.0328340+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:16:29.0328706+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:16:29.0330491+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:16:29.0330691+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:16:29.0332860+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:16:29.0360752+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:16:29.0365505+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=6EpQyMXa9wQh82OUKHYzqCDPnQdzv3Xfep6P / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:16:29.0374234+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:16:29.0380740+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:16:29.0381123+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:16:29.0387981+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:16:29.2214373+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"6EpQyMXa9wQh82OUKHYzqCDPnQdzv3Xfep6P",{"status":"Accepted","currentTime":"2025-06-26T21:16:29.0381145+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:16:37.5482938+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:16:37.5483255+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:16:37.5483707+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"c18cc495b9fa4b7aa75d631077a88d03","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:17:22.6177766+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=3001
trce: OCPP.Core.Server.Startup[0] @ 2025-06-26T21:17:56.5989381+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-06-26T21:17:56.7817456+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
info: OCPPMiddleware[0] @ 2025-06-26T21:18:06.4480078+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:18:07.8188065+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:18:07.8189527+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:18:07.8203794+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:18:07.8204336+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:18:07.8243704+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:07.9025545+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:07.9115752+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=nEuqPRBg2OpUEbBh3JVPXVZ7gtEUr5VBOnQh / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:07.9198091+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:08.0102518+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:08.0103367+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:08.0222841+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:08.2599591+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"nEuqPRBg2OpUEbBh3JVPXVZ7gtEUr5VBOnQh",{"status":"Accepted","currentTime":"2025-06-26T21:18:08.0103456+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:14.4062327+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:14.4063304+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:14.4064979+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"375fdf161f0943ac9728ed78ab1d295e","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:14.4143835+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:14.4152329+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=375fdf161f0943ac9728ed78ab1d295e / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:14.4307063+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:16.3650971+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:16.3654849+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=375fdf161f0943ac9728ed78ab1d295e / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:16.3714591+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:16.3931009+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
info: OCPPMiddleware[0] @ 2025-06-26T21:18:27.4479771+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:18:27.5394520+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:18:27.5395097+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:18:27.5397488+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:18:27.5398198+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:18:27.5401383+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:27.5439202+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:27.5445628+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=375fdf161f0943ac9728ed78ab1d295e / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:27.5457187+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:27.5473125+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:27.5474980+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:27.5499481+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:27.7427474+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"375fdf161f0943ac9728ed78ab1d295e",{"status":"Accepted","currentTime":"2025-06-26T21:18:27.5475305+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:30.0556416+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:30.0557445+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:30.0558015+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"2d10564bf0364720b46b33e023d0bcc5","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:30.0589206+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:30.0593726+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=2d10564bf0364720b46b33e023d0bcc5 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:30.0605378+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:34.3344006+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:34.3346764+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2d10564bf0364720b46b33e023d0bcc5 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:18:34.3352997+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:18:34.3376349+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
info: OCPPMiddleware[0] @ 2025-06-26T21:19:41.2963851+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:19:41.4278368+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:19:41.4278627+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:19:41.4279229+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:19:41.4279276+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:19:41.4281062+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:41.4307141+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:41.4311515+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2d10564bf0364720b46b33e023d0bcc5 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:19:41.4317922+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:19:41.4324403+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:19:41.4324710+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:19:41.4325607+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:41.6086435+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"2d10564bf0364720b46b33e023d0bcc5",{"status":"Accepted","currentTime":"2025-06-26T21:19:41.4324725+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:43.0658532+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:43.0659579+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:43.0661376+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"685b3f86c76b47a282818b893e77fa2f","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:43.0691440+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:43.0695091+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=685b3f86c76b47a282818b893e77fa2f / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:19:43.0705148+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:44.3124132+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 146 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:44.3127406+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=685b3f86c76b47a282818b893e77fa2f / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:19:44.3134455+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
fail: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:19:44.3150140+07:00
      OCPPMiddleware.Receive16 Error => Websocket disconnect: State=Open / CloseStatus=(null) : Required property 'connectorId' not found in JSON. Path '', line 1, position 88.
info: OCPPMiddleware[0] @ 2025-06-26T21:20:08.6298378+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:20:08.7174429+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:20:08.7174584+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:20:08.7175021+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:20:08.7175059+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:20:08.7176071+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:08.7225449+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:08.7231133+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=SZP2V1cxbEPRqneC04HZ9wRdueOZr7YqPyYt / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:20:08.7241464+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:20:08.7248330+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:20:08.7248518+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:20:08.7249447+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:08.8909326+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"SZP2V1cxbEPRqneC04HZ9wRdueOZr7YqPyYt",{"status":"Accepted","currentTime":"2025-06-26T21:20:08.7248533+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:27.7800079+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:27.7800585+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:27.7800784+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"aaa559aeeecf423f95007337d14423da","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:27.7812071+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:20:27.7814767+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=aaa559aeeecf423f95007337d14423da / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:20:27.7825069+07:00
      HandleReset => API response: {"status": "Accepted"}
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:42.8847292+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=3001
info: OCPPMiddleware[0] @ 2025-06-26T21:21:43.9174323+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:21:44.0011370+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:21:44.0011553+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:21:44.0012228+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:21:44.0012288+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:21:44.0014117+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:44.0044533+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:44.0050947+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=aaa559aeeecf423f95007337d14423da / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:44.0059554+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:44.0064512+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:44.0064643+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:44.0065809+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:44.1724727+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"aaa559aeeecf423f95007337d14423da",{"status":"Accepted","currentTime":"2025-06-26T21:21:44.0064655+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:46.5468467+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=EndpointUnavailable
info: OCPPMiddleware[0] @ 2025-06-26T21:21:48.6036277+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-06-26T21:21:48.6886441+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-06-26T21:21:48.6886725+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-06-26T21:21:48.6887315+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-06-26T21:21:48.6887377+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-06-26T21:21:48.6889334+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:48.6934646+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:48.6938069+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=0SMdsXdmEJX5fWKt18w0ns1gYUgMTr1MFK0L / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:48.6948155+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:48.6955686+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:48.6955912+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:48.6956844+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:48.8700286+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"0SMdsXdmEJX5fWKt18w0ns1gYUgMTr1MFK0L",{"status":"Accepted","currentTime":"2025-06-26T21:21:48.6955927+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:55.6189053+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=1 
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:55.6189200+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":1,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:55.6189439+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"0e464bc1f4344cc2b6c196ce32f521cd","RemoteStartTransaction",{"connectorId":1,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:55.6199749+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:55.6203388+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=0e464bc1f4344cc2b6c196ce32f521cd / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:55.6221244+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:55.6233838+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 162 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:55.6238683+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=0e464bc1f4344cc2b6c196ce32f521cd / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:55.6247625+07:00
      DeserializeMessage => Using schema file: D:\NUTTIW-PROJECT\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:55.6262550+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:55.6262792+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:55.7291953+07:00
      StartTransaction => Charge tag='B4A63CDF' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:56.1418835+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:56.2799088+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-06-26T21:21:56.4587902+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:21:56.5007206+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"0e464bc1f4344cc2b6c196ce32f521cd",{"idTagInfo":{"expiryDate":"2026-06-26T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":250626000006}]
info: OCPPMiddleware.OCPP16[0] @ 2025-06-26T21:22:17.2190598+07:00
      OCPPMiddleware.Receive16 => Websocket disconnected: State=Closed / CloseStatus=3001
trce: OCPP.Core.Server.Startup[0] @ 2025-07-10T18:17:31.2477107+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-10T18:17:31.5356803+07:00
      Overriding address(es) 'http://localhost:8081'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPP.Core.Server.Startup[0] @ 2025-07-28T22:17:15.4192460+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-28T22:17:16.5988275+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-28T22:17:17.7226663+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T22:17:18.4957622+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-28T22:18:19.0471842+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-28T22:18:20.3132556+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-28T22:18:20.3164370+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-28T22:18:20.3187124+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-28T22:18:20.3187568+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-28T22:18:20.3212092+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:20.4007635+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:20.4153045+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:20.5177764+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:20.5746685+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:20.5747223+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:20.5805792+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:20.7756912+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"status":"Accepted","currentTime":"2025-07-28T22:18:20.5747376+07:00","interval":300}]
trce: OCPPMiddleware[0] @ 2025-07-28T22:18:24.8196445+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T22:18:25.0211374+07:00
      OCPPMiddleware => Bad path request
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:29.1235956+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 57 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:29.1263206+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=Heartbeat)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:29.1268767+07:00
      Processing heartbeat...
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:29.3031085+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"currentTime":"2025-07-28T22:18:29.1269487+07:00"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:43.4070657+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 75 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:43.4100124+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=Authorize)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:43.4117872+07:00
      Processing authorize request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:43.4119372+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\AuthorizeRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:43.4196392+07:00
      Authorize => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:43.5771598+07:00
      Authorize => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:18:43.5787414+07:00
      Authorize => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:43.7549196+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2025-07-28T22:23:43.4199333+07:00","parentIdTag":"","status":"Accepted"}}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:45.7859548+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 169 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:18:45.7886104+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:19:01.1243303+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:19:04.3367491+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:19:05.0568271+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:20:14.0494157+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:21:21.7579912+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:21:23.9279069+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:21:24.8922698+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:21:36.6870235+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":250721000003}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:21:44.2686818+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 179 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:21:44.2727148+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:21:44.2766350+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:21:44.3059517+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:21:44.3059956+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:22:06.2497468+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:22:22.7713649+07:00
      UpdateConnectorStatus => Save ConnectorStatus: ID=473d9003-023b-474b-b37e-71d64b978474 / Connector=1 / Status=Available / Meter=9.999
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-28T22:22:28.2250961+07:00
      Failed executing DbCommand (3ms) [Parameters=[@p18='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Decimal), @p4='?' (DbType = DateTime), @p5='?', @p6='?' (DbType = DateTime), @p7='?' (DbType = Decimal), @p8='?' (DbType = Decimal), @p9='?' (DbType = Decimal), @p10='?', @p11='?' (DbType = DateTime), @p12='?' (DbType = Guid), @p13='?', @p14='?' (DbType = Int64), @p15='?', @p16='?' (DbType = DateTime), @p17='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      UPDATE transaction.tbl_transaction SET f_card_id = @p0, f_charger_id = @p1, f_connector_id = @p2, f_cost = @p3, f_created = @p4, f_end_result = @p5, f_end_time = @p6, f_meter_end = @p7, f_meter_start = @p8, f_pre_meter = @p9, f_start_result = @p10, f_start_time = @p11, f_station_id = @p12, f_status = @p13, f_transaction_no = @p14, f_transaction_status = @p15, f_updated = @p16, f_user_id = @p17
      WHERE f_id = @p18;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-28T22:22:28.2634896+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
         at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
         at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
         at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
         at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
         at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
         at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Cannot write DateTime with Kind=Local to PostgreSQL type 'timestamp with time zone', only UTC is supported. Note that it's not possible to mix DateTimes with different Kinds in an array, range, or multirange. (Parameter 'value')
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(DateTime value, Nullable`1 expectedPgTypeId, Boolean validateOnly)
   at Npgsql.Internal.Converters.DateTimeConverterResolver.<>c.<CreateResolver>b__0_0(DateTimeConverterResolver`1 resolver, DateTime value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.Converters.DateTimeConverterResolver`1.Get(T value, Nullable`1 expectedPgTypeId)
   at Npgsql.Internal.PgConverterResolver`1.GetAsObjectInternal(PgTypeInfo typeInfo, Object value, Nullable`1 expectedPgTypeId)
   at Npgsql.NpgsqlParameter.ResolveTypeInfo(PgSerializerOptions options)
   at Npgsql.NpgsqlParameterCollection.ProcessParameters(PgSerializerOptions options, Boolean validateValues, CommandType commandType)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
trce: OCPP.Core.Server.Startup[0] @ 2025-07-28T22:24:14.5640822+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-28T22:24:14.9110409+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-28T22:24:15.7502456+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T22:24:16.4826002+07:00
      OCPPMiddleware => Bad path request
trce: OCPPMiddleware[0] @ 2025-07-28T22:24:19.5561135+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T22:24:19.7532393+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-28T22:24:23.7706878+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-28T22:24:25.7354762+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-28T22:24:25.7386172+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-28T22:24:25.7413777+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-28T22:24:25.7414354+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-28T22:24:25.7457916+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:25.8757283+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:25.8848995+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:25.9099173+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:25.9944934+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:25.9945610+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:26.0037121+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:26.2090684+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"status":"Accepted","currentTime":"2025-07-28T22:24:25.9945858+07:00","interval":300}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:30.3148584+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 169 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:30.3195425+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:32.8159011+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:32.8240384+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:32.8240778+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:33.4316306+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:34.9688238+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:35.0843890+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:35.2268858+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:35.2625028+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":250721000003}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:38.1933088+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 179 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:38.1963929+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:38.1998025+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:38.2108784+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:38.2108989+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:40.2213845+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:40.4936204+07:00
      UpdateConnectorStatus => Save ConnectorStatus: ID=473d9003-023b-474b-b37e-71d64b978474 / Connector=1 / Status=Available / Meter=9.999
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:48.2722706+07:00
      StopTransaction => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:48.4469678+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","status":"Accepted"}}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:55.5512953+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 169 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:24:55.5546952+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:58.2438140+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:58.2444625+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:24:58.2444906+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:02.3861176+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:36.8389232+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblTransaction' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 157
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:36.8397124+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:36.9401466+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:37.0999552+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:37.1002687+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:25:37.1003530+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI","InternalError","",{}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:25:41.9068199+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 169 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:25:41.9104473+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:43.7666472+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:43.7673762+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:43.7673979+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:25:44.3669281+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:05.0089573+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblTransaction' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 157
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:05.0127318+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:05.1124605+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:05.2517840+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:05.2864127+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:05.2864718+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI","InternalError","",{}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:11.2973390+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 179 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:11.3018790+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:11.3025472+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:11.3038418+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:11.3039012+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:13.8039869+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:13.9434152+07:00
      StopTransaction => Unknown or not matching transaction: id=250721000003 / chargepoint=Test1234 / tag=11001122
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:14.0135972+07:00
      MessageLog => Writing entry 'StopTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:14.0478661+07:00
      StopTransaction => Response serialized
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:14.1825621+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=PropertyConstraintViolation
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:14.1826266+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI","PropertyConstraintViolation","",{}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-28T22:26:22.0529645+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-28T22:26:22.5039263+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-28T22:26:23.5401893+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T22:26:24.1378843+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-28T22:26:29.3017132+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-28T22:26:31.5348340+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-28T22:26:31.5389296+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-28T22:26:31.5418686+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-28T22:26:31.5419587+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-28T22:26:31.5465817+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:31.6838644+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:31.6932748+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:31.7209028+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:31.8233075+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:31.8233970+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:31.8362949+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:32.0613511+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"status":"Accepted","currentTime":"2025-07-28T22:26:31.8234363+07:00","interval":300}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:33.2304539+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 169 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:26:33.2345748+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:35.5867182+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:35.5950884+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:35.5951213+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:26:38.8144109+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:24.6229383+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:24.7693855+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:24.9061847+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:27:24.9423431+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":0}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:27:34.0376885+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 168 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:27:34.0426807+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:34.0472284+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:34.0623149+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:34.0623584+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:36.0025802+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:36.1994606+07:00
      StopTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at System.Linq.Expressions.Interpreter.Instruction.NullCheck(Object o)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.ControllerOCPP16.HandleStopTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StopTransaction.cs:line 101
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:36.2020073+07:00
      StopTransaction => Response serialized
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:36.3492301+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:27:36.3493706+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI","InternalError","",{}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:27:39.1418347+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 168 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:27:39.1450750+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:39.1457996+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:39.1469013+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:39.1469344+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:27:53.9922233+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:28:25.6603035+07:00
      StopTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at System.Linq.Expressions.Interpreter.Instruction.NullCheck(Object o)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.ControllerOCPP16.HandleStopTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StopTransaction.cs:line 101
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:28:25.6607370+07:00
      StopTransaction => Response serialized
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:28:25.8396580+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:28:25.8397963+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI","InternalError","",{}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:22.8243077+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 57 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:22.8284213+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=Heartbeat)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:22.8293418+07:00
      Processing heartbeat...
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:23.0148668+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"currentTime":"2025-07-28T22:31:22.8294535+07:00"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:23.9685416+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 75 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:23.9731328+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=Authorize)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:23.9757293+07:00
      Processing authorize request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:23.9758828+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\AuthorizeRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:23.9774515+07:00
      Authorize => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:24.0628435+07:00
      Authorize => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:24.0635056+07:00
      Authorize => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:24.2446905+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2025-07-28T22:36:23.9775756+07:00","parentIdTag":"","status":"Accepted"}}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:27.5730625+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 169 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:31:27.5774969+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:29.4979447+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:29.4985242+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:29.4985442+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:31:33.2348005+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:01.6251621+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:01.7302058+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:01.8379597+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:32:01.8752325+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728153150}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:32:09.5137612+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 203 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:32:09.5429682+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StatusNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.5463401+07:00
      Processing status notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.5466586+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StatusNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.5677119+07:00
      StatusNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.6913630+07:00
      MessageLog => Writing entry 'StatusNotification'
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.7311534+07:00
      StatusNotification => ChargePoint=Test1234 / Connector=2 / newStatus=Charging
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.8562861+07:00
      UpdateConnectorStatus => Save ConnectorStatus: ID=473d9003-023b-474b-b37e-71d64b978474 / Connector=2 / Status=Charging / Meter=(null)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.8570373+07:00
      StatusNotification => new OnlineConnectorStatus with values: ChargePoint=Test1234 / Connector=2 / newStatus=Charging
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:09.8574890+07:00
      StatusNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:32:09.8575376+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:32:11.7579320+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 181 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:32:11.7621073+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:11.7628311+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:11.7636375+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:11.7636568+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:32:17.5264315+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.Startup[0] @ 2025-07-28T22:39:05.4496811+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-28T22:39:05.8370828+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-28T22:39:06.6803448+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T22:39:07.3060822+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-28T22:39:33.4807453+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-28T22:39:34.6842788+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-28T22:39:34.6869772+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-28T22:39:34.6889472+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-28T22:39:34.6889817+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-28T22:39:34.6911026+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:34.7670080+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 326 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:34.7734643+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:34.7924154+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:34.8447315+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:34.8447770+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:34.8515365+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:35.0550903+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"status":"Accepted","currentTime":"2025-07-28T22:39:34.8447925+07:00","interval":300}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:38.1008956+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 169 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:38.1038149+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:39.8921588+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:39.9017279+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:39.9017729+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:40.4852797+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:41.7807185+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:41.8915318+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:42.0208375+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:42.0583778+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728153941}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:44.7057663+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 181 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:39:44.7083450+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:44.7119929+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:44.7243698+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:44.7244083+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:39:48.4990726+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:40:11.8089301+07:00
      UpdateConnectorStatus => Save ConnectorStatus: ID=473d9003-023b-474b-b37e-71d64b978474 / Connector=2 / Status=Available / Meter=9.999
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T22:40:35.1233009+07:00
      StopTransaction => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T22:40:35.2969421+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"yOalC1ZJpbTskDnjIZSCnUOv4YRAnCBGuJDI",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","status":"Accepted"}}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-28T23:50:18.8375885+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-28T23:50:19.2263494+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-28T23:50:20.5028139+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T23:50:21.0752406+07:00
      OCPPMiddleware => Bad path request
trce: OCPP.Core.Server.Startup[0] @ 2025-07-28T23:51:30.6442322+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-28T23:51:30.9648612+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-28T23:51:31.9755303+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-28T23:51:32.4935743+07:00
      OCPPMiddleware => Bad path request
trce: OCPPMiddleware[0] @ 2025-07-28T23:58:57.7606751+07:00
      OCPPMiddleware => Index status page
info: OCPPMiddleware[0] @ 2025-07-28T23:59:03.8604738+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-28T23:59:04.9207198+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-28T23:59:04.9236804+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-28T23:59:04.9254389+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-28T23:59:04.9254732+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-28T23:59:04.9274791+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T23:59:04.9480372+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-28T23:59:04.9540749+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=feacf132919940abbc06c840be9dce02 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T23:59:14.5958058+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T23:59:14.6509299+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T23:59:14.6509638+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-28T23:59:14.6558198+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-28T23:59:14.8474027+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"feacf132919940abbc06c840be9dce02",{"status":"Accepted","currentTime":"2025-07-28T23:59:14.6509842+07:00","interval":300}]
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:00:25.0121912+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:01:16.3477238+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:13:32.8428055+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:14:26.4839088+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:49.4307166+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:49.4308769+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:49.4312386+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"cbd6efe352ca4b4e91e2e83ccd6d9895","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:49.4346440+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:49.4364547+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=cbd6efe352ca4b4e91e2e83ccd6d9895 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:49.4665039+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:49.4671901+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:49.4693937+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=cbd6efe352ca4b4e91e2e83ccd6d9895 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:52.9925946+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:52.9991674+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:52.9992047+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:55.9248031+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:58.0804623+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:58.1866125+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:15:58.3080607+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:15:58.3430910+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"cbd6efe352ca4b4e91e2e83ccd6d9895",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728171557}]
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:16:29.3218245+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T00:21:27.2887281+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T00:21:27.7776674+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T00:21:28.9680293+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T00:21:29.4738711+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T00:21:49.6243224+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T00:21:50.7700881+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T00:21:50.7726960+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T00:21:50.7740994+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T00:21:50.7741311+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T00:21:50.7760981+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:21:50.8003388+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:21:50.8073186+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=cbd6efe352ca4b4e91e2e83ccd6d9895 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:21:50.8262220+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:21:50.8707711+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:21:50.8708041+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:21:50.8750694+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:21:51.0317772+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"cbd6efe352ca4b4e91e2e83ccd6d9895",{"status":"Accepted","currentTime":"2025-07-29T00:21:50.8708178+07:00","interval":300}]
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:29:12.1609663+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:41:20.9770110+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:46:11.1964181+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext)
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:24.0727571+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:24.0729054+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:24.0730401+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"d66c14784399481fa3727e9f338a0cef","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:24.0764004+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:24.0781805+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=d66c14784399481fa3727e9f338a0cef / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:24.1283841+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:24.1292842+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:24.1328615+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=d66c14784399481fa3727e9f338a0cef / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:27.8626807+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:27.8699719+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:27.8700150+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:31.4074774+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:33.9242722+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:34.0381305+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:46:34.1646756+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:46:34.2014326+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"d66c14784399481fa3727e9f338a0cef",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728174633}]
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:47:19.5895260+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext)
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:53:11.1839844+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext)
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T00:54:00.3982764+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext)
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:11.2339212+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:11.2339918+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:11.2340496+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"100fed98abf7493383553f83b236edae","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:11.2356174+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:11.2374311+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=100fed98abf7493383553f83b236edae / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:11.2632131+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:11.2635186+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:11.2654355+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=100fed98abf7493383553f83b236edae / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:15.3249580+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:15.3258222+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:15.3258515+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:17.9628206+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:20.0219410+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:20.0906434+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T00:54:20.1944197+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T00:54:20.2325556+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"100fed98abf7493383553f83b236edae",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728175419}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T01:01:48.8978461+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T01:01:49.2128874+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T01:01:49.9948508+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T01:01:50.5159103+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T01:09:16.1231892+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T01:09:17.3028498+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T01:09:17.3052350+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T01:09:17.3070435+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T01:09:17.3070745+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T01:09:17.3091053+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:17.3315278+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:17.3381057+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=100fed98abf7493383553f83b236edae / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:17.3558644+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:17.4118059+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:17.4118399+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:17.4169148+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:17.6146413+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"100fed98abf7493383553f83b236edae",{"status":"Accepted","currentTime":"2025-07-29T01:09:17.4118602+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:37.2360134+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:37.2360728+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:37.2362088+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"e01fd666f6ba4abfb285f4e0ce140e34","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:37.2389807+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:37.2405310+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=e01fd666f6ba4abfb285f4e0ce140e34 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:37.2818269+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:37.2827118+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:37.2844835+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=e01fd666f6ba4abfb285f4e0ce140e34 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:40.9632327+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:40.9693861+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:40.9694145+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:44.1990577+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:09:46.7481643+07:00
      Failed executing DbCommand (41ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:09:46.7851032+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:46.8441882+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 154
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:46.8481446+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:46.9408890+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:09:47.0007221+07:00
      Failed executing DbCommand (45ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:09:47.0573065+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:47.0941213+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:47.1720615+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:09:47.2163332+07:00
      Failed executing DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:09:47.2640459+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:47.2946045+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:09:47.2955726+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:09:47.2956790+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"e01fd666f6ba4abfb285f4e0ce140e34","InternalError","",{}]
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T01:14:40.9165226+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:29:59.3298153+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:29:59.3299775+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:29:59.3300504+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"c2cbbe1989e0467e9fa25015965b17df","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:29:59.3314918+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:29:59.3330774+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=c2cbbe1989e0467e9fa25015965b17df / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:29:59.3514385+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:29:59.3520523+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:29:59.3544885+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=c2cbbe1989e0467e9fa25015965b17df / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:00.1222877+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:00.1236424+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:00.1236684+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:00.9781880+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:30:01.9278089+07:00
      Failed executing DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = Decimal), @p46='?', @p47='?' (DbType = DateTime), @p48='?' (DbType = Decimal), @p49='?' (DbType = Decimal), @p50='?' (DbType = Decimal), @p51='?', @p52='?' (DbType = DateTime), @p53='?' (DbType = Guid), @p54='?', @p55='?' (DbType = Int64), @p56='?', @p57='?' (DbType = DateTime), @p58='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:30:01.9889324+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:02.0268934+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 150
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:02.0278769+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:02.1022049+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:30:02.1573979+07:00
      Failed executing DbCommand (51ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = Decimal), @p58='?', @p59='?' (DbType = DateTime), @p60='?' (DbType = Decimal), @p61='?' (DbType = Decimal), @p62='?' (DbType = Decimal), @p63='?', @p64='?' (DbType = DateTime), @p65='?' (DbType = Guid), @p66='?', @p67='?' (DbType = Int64), @p68='?', @p69='?' (DbType = DateTime), @p70='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:30:02.2005552+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:02.2321015+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:02.3059894+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:30:02.3480580+07:00
      Failed executing DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = Decimal), @p70='?', @p71='?' (DbType = DateTime), @p72='?' (DbType = Decimal), @p73='?' (DbType = Decimal), @p74='?' (DbType = Decimal), @p75='?', @p76='?' (DbType = DateTime), @p77='?' (DbType = Guid), @p78='?', @p79='?' (DbType = Int64), @p80='?', @p81='?' (DbType = DateTime), @p82='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:30:02.3939787+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:02.4219308+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:30:02.4227413+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:30:02.4227951+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"c2cbbe1989e0467e9fa25015965b17df","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:16.3503271+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:16.3503675+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:16.3504295+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"d3b911cbfafe4f27b8ea2030d87dac9c","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:16.3542573+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:16.3565914+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=d3b911cbfafe4f27b8ea2030d87dac9c / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:16.3749920+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:16.3753492+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:16.3770689+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=d3b911cbfafe4f27b8ea2030d87dac9c / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:17.1705284+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:17.1711841+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:17.1712213+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:17.8214952+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:31:27.6234366+07:00
      Failed executing DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = Decimal), @p70='?', @p71='?' (DbType = DateTime), @p72='?' (DbType = Decimal), @p73='?' (DbType = Decimal), @p74='?' (DbType = Decimal), @p75='?', @p76='?' (DbType = DateTime), @p77='?' (DbType = Guid), @p78='?', @p79='?' (DbType = Int64), @p80='?', @p81='?' (DbType = DateTime), @p82='?' (DbType = Guid), @p83='?' (DbType = Guid), @p84='?' (DbType = Guid), @p85='?' (DbType = Guid), @p86='?' (DbType = Decimal), @p87='?', @p88='?' (DbType = DateTime), @p89='?' (DbType = Decimal), @p90='?' (DbType = Decimal), @p91='?' (DbType = Decimal), @p92='?', @p93='?' (DbType = DateTime), @p94='?' (DbType = Guid), @p95='?', @p96='?' (DbType = Int64), @p97='?', @p98='?' (DbType = DateTime), @p99='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:31:27.6721276+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:27.7107938+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 150
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:27.7119288+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:27.7892229+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:31:27.8342260+07:00
      Failed executing DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = Decimal), @p82='?', @p83='?' (DbType = DateTime), @p84='?' (DbType = Decimal), @p85='?' (DbType = Decimal), @p86='?' (DbType = Decimal), @p87='?', @p88='?' (DbType = DateTime), @p89='?' (DbType = Guid), @p90='?', @p91='?' (DbType = Int64), @p92='?', @p93='?' (DbType = DateTime), @p94='?' (DbType = Guid), @p95='?' (DbType = Guid), @p96='?' (DbType = Guid), @p97='?' (DbType = Guid), @p98='?' (DbType = Decimal), @p99='?', @p100='?' (DbType = DateTime), @p101='?' (DbType = Decimal), @p102='?' (DbType = Decimal), @p103='?' (DbType = Decimal), @p104='?', @p105='?' (DbType = DateTime), @p106='?' (DbType = Guid), @p107='?', @p108='?' (DbType = Int64), @p109='?', @p110='?' (DbType = DateTime), @p111='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:31:27.8771570+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:27.9131519+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:27.9907012+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:31:28.0344329+07:00
      Failed executing DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = Decimal), @p94='?', @p95='?' (DbType = DateTime), @p96='?' (DbType = Decimal), @p97='?' (DbType = Decimal), @p98='?' (DbType = Decimal), @p99='?', @p100='?' (DbType = DateTime), @p101='?' (DbType = Guid), @p102='?', @p103='?' (DbType = Int64), @p104='?', @p105='?' (DbType = DateTime), @p106='?' (DbType = Guid), @p107='?' (DbType = Guid), @p108='?' (DbType = Guid), @p109='?' (DbType = Guid), @p110='?' (DbType = Decimal), @p111='?', @p112='?' (DbType = DateTime), @p113='?' (DbType = Decimal), @p114='?' (DbType = Decimal), @p115='?' (DbType = Decimal), @p116='?', @p117='?' (DbType = DateTime), @p118='?' (DbType = Guid), @p119='?', @p120='?' (DbType = Int64), @p121='?', @p122='?' (DbType = DateTime), @p123='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:31:28.0781455+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:28.1076393+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:31:28.1086242+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:31:28.1086544+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"d3b911cbfafe4f27b8ea2030d87dac9c","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:33:22.7298527+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:33:23.9989863+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:33:25.9691304+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"07fa808cb16c4696b9284936509cd3d0","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:33:25.9706917+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:33:26.6075849+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=07fa808cb16c4696b9284936509cd3d0 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:33:26.6375959+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:34:15.6396431+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:34:15.6423336+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=07fa808cb16c4696b9284936509cd3d0 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:34:29.9761438+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:35:21.7726143+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:35:21.7726299+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:35:55.2584939+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:36:15.9188216+07:00
      Failed executing DbCommand (46ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = Decimal), @p94='?', @p95='?' (DbType = DateTime), @p96='?' (DbType = Decimal), @p97='?' (DbType = Decimal), @p98='?' (DbType = Decimal), @p99='?', @p100='?' (DbType = DateTime), @p101='?' (DbType = Guid), @p102='?', @p103='?' (DbType = Int64), @p104='?', @p105='?' (DbType = DateTime), @p106='?' (DbType = Guid), @p107='?' (DbType = Guid), @p108='?' (DbType = Guid), @p109='?' (DbType = Guid), @p110='?' (DbType = Decimal), @p111='?', @p112='?' (DbType = DateTime), @p113='?' (DbType = Decimal), @p114='?' (DbType = Decimal), @p115='?' (DbType = Decimal), @p116='?', @p117='?' (DbType = DateTime), @p118='?' (DbType = Guid), @p119='?', @p120='?' (DbType = Int64), @p121='?', @p122='?' (DbType = DateTime), @p123='?' (DbType = Guid), @p124='?' (DbType = Guid), @p125='?' (DbType = Guid), @p126='?' (DbType = Guid), @p127='?' (DbType = Decimal), @p128='?', @p129='?' (DbType = DateTime), @p130='?' (DbType = Decimal), @p131='?' (DbType = Decimal), @p132='?' (DbType = Decimal), @p133='?', @p134='?' (DbType = DateTime), @p135='?' (DbType = Guid), @p136='?', @p137='?' (DbType = Int64), @p138='?', @p139='?' (DbType = DateTime), @p140='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:36:15.9680053+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:07.6237301+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 150
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:07.6247977+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:07.7387557+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:37:07.7843614+07:00
      Failed executing DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = Decimal), @p106='?', @p107='?' (DbType = DateTime), @p108='?' (DbType = Decimal), @p109='?' (DbType = Decimal), @p110='?' (DbType = Decimal), @p111='?', @p112='?' (DbType = DateTime), @p113='?' (DbType = Guid), @p114='?', @p115='?' (DbType = Int64), @p116='?', @p117='?' (DbType = DateTime), @p118='?' (DbType = Guid), @p119='?' (DbType = Guid), @p120='?' (DbType = Guid), @p121='?' (DbType = Guid), @p122='?' (DbType = Decimal), @p123='?', @p124='?' (DbType = DateTime), @p125='?' (DbType = Decimal), @p126='?' (DbType = Decimal), @p127='?' (DbType = Decimal), @p128='?', @p129='?' (DbType = DateTime), @p130='?' (DbType = Guid), @p131='?', @p132='?' (DbType = Int64), @p133='?', @p134='?' (DbType = DateTime), @p135='?' (DbType = Guid), @p136='?' (DbType = Guid), @p137='?' (DbType = Guid), @p138='?' (DbType = Guid), @p139='?' (DbType = Decimal), @p140='?', @p141='?' (DbType = DateTime), @p142='?' (DbType = Decimal), @p143='?' (DbType = Decimal), @p144='?' (DbType = Decimal), @p145='?', @p146='?' (DbType = DateTime), @p147='?' (DbType = Guid), @p148='?', @p149='?' (DbType = Int64), @p150='?', @p151='?' (DbType = DateTime), @p152='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:37:07.8295121+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:07.8604688+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:07.9352486+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:37:07.9854620+07:00
      Failed executing DbCommand (45ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = Decimal), @p118='?', @p119='?' (DbType = DateTime), @p120='?' (DbType = Decimal), @p121='?' (DbType = Decimal), @p122='?' (DbType = Decimal), @p123='?', @p124='?' (DbType = DateTime), @p125='?' (DbType = Guid), @p126='?', @p127='?' (DbType = Int64), @p128='?', @p129='?' (DbType = DateTime), @p130='?' (DbType = Guid), @p131='?' (DbType = Guid), @p132='?' (DbType = Guid), @p133='?' (DbType = Guid), @p134='?' (DbType = Decimal), @p135='?', @p136='?' (DbType = DateTime), @p137='?' (DbType = Decimal), @p138='?' (DbType = Decimal), @p139='?' (DbType = Decimal), @p140='?', @p141='?' (DbType = DateTime), @p142='?' (DbType = Guid), @p143='?', @p144='?' (DbType = Int64), @p145='?', @p146='?' (DbType = DateTime), @p147='?' (DbType = Guid), @p148='?' (DbType = Guid), @p149='?' (DbType = Guid), @p150='?' (DbType = Guid), @p151='?' (DbType = Decimal), @p152='?', @p153='?' (DbType = DateTime), @p154='?' (DbType = Decimal), @p155='?' (DbType = Decimal), @p156='?' (DbType = Decimal), @p157='?', @p158='?' (DbType = DateTime), @p159='?' (DbType = Guid), @p160='?', @p161='?' (DbType = Int64), @p162='?', @p163='?' (DbType = DateTime), @p164='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:37:08.0279635+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:08.0557299+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:08.0564399+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:08.0564778+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"07fa808cb16c4696b9284936509cd3d0","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:21.2943413+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:21.2943864+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:21.2944441+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"d776628b80b3407fa964df9f8c072d2e","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:21.2955415+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:21.2974755+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=d776628b80b3407fa964df9f8c072d2e / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:21.3181651+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:21.3184929+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:21.3205798+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=d776628b80b3407fa964df9f8c072d2e / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:37.9833666+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:37.9843560+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:37.9843839+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:38.7803525+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:37:40.5203433+07:00
      Failed executing DbCommand (37ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = Decimal), @p118='?', @p119='?' (DbType = DateTime), @p120='?' (DbType = Decimal), @p121='?' (DbType = Decimal), @p122='?' (DbType = Decimal), @p123='?', @p124='?' (DbType = DateTime), @p125='?' (DbType = Guid), @p126='?', @p127='?' (DbType = Int64), @p128='?', @p129='?' (DbType = DateTime), @p130='?' (DbType = Guid), @p131='?' (DbType = Guid), @p132='?' (DbType = Guid), @p133='?' (DbType = Guid), @p134='?' (DbType = Decimal), @p135='?', @p136='?' (DbType = DateTime), @p137='?' (DbType = Decimal), @p138='?' (DbType = Decimal), @p139='?' (DbType = Decimal), @p140='?', @p141='?' (DbType = DateTime), @p142='?' (DbType = Guid), @p143='?', @p144='?' (DbType = Int64), @p145='?', @p146='?' (DbType = DateTime), @p147='?' (DbType = Guid), @p148='?' (DbType = Guid), @p149='?' (DbType = Guid), @p150='?' (DbType = Guid), @p151='?' (DbType = Decimal), @p152='?', @p153='?' (DbType = DateTime), @p154='?' (DbType = Decimal), @p155='?' (DbType = Decimal), @p156='?' (DbType = Decimal), @p157='?', @p158='?' (DbType = DateTime), @p159='?' (DbType = Guid), @p160='?', @p161='?' (DbType = Int64), @p162='?', @p163='?' (DbType = DateTime), @p164='?' (DbType = Guid), @p165='?' (DbType = Guid), @p166='?' (DbType = Guid), @p167='?' (DbType = Guid), @p168='?' (DbType = Decimal), @p169='?', @p170='?' (DbType = DateTime), @p171='?' (DbType = Decimal), @p172='?' (DbType = Decimal), @p173='?' (DbType = Decimal), @p174='?', @p175='?' (DbType = DateTime), @p176='?' (DbType = Guid), @p177='?', @p178='?' (DbType = Int64), @p179='?', @p180='?' (DbType = DateTime), @p181='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:37:40.5641299+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:54.5819624+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 150
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:54.5827745+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:54.6832135+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:37:54.7305016+07:00
      Failed executing DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = DateTime), @p118='?', @p119='?', @p120='?', @p121='?', @p122='?', @p123='?' (DbType = Guid), @p124='?' (DbType = Guid), @p125='?' (DbType = DateTime), @p126='?' (DbType = Guid), @p127='?' (DbType = Guid), @p128='?' (DbType = Guid), @p129='?' (DbType = Decimal), @p130='?', @p131='?' (DbType = DateTime), @p132='?' (DbType = Decimal), @p133='?' (DbType = Decimal), @p134='?' (DbType = Decimal), @p135='?', @p136='?' (DbType = DateTime), @p137='?' (DbType = Guid), @p138='?', @p139='?' (DbType = Int64), @p140='?', @p141='?' (DbType = DateTime), @p142='?' (DbType = Guid), @p143='?' (DbType = Guid), @p144='?' (DbType = Guid), @p145='?' (DbType = Guid), @p146='?' (DbType = Decimal), @p147='?', @p148='?' (DbType = DateTime), @p149='?' (DbType = Decimal), @p150='?' (DbType = Decimal), @p151='?' (DbType = Decimal), @p152='?', @p153='?' (DbType = DateTime), @p154='?' (DbType = Guid), @p155='?', @p156='?' (DbType = Int64), @p157='?', @p158='?' (DbType = DateTime), @p159='?' (DbType = Guid), @p160='?' (DbType = Guid), @p161='?' (DbType = Guid), @p162='?' (DbType = Guid), @p163='?' (DbType = Decimal), @p164='?', @p165='?' (DbType = DateTime), @p166='?' (DbType = Decimal), @p167='?' (DbType = Decimal), @p168='?' (DbType = Decimal), @p169='?', @p170='?' (DbType = DateTime), @p171='?' (DbType = Guid), @p172='?', @p173='?' (DbType = Int64), @p174='?', @p175='?' (DbType = DateTime), @p176='?' (DbType = Guid), @p177='?' (DbType = Guid), @p178='?' (DbType = Guid), @p179='?' (DbType = Guid), @p180='?' (DbType = Decimal), @p181='?', @p182='?' (DbType = DateTime), @p183='?' (DbType = Decimal), @p184='?' (DbType = Decimal), @p185='?' (DbType = Decimal), @p186='?', @p187='?' (DbType = DateTime), @p188='?' (DbType = Guid), @p189='?', @p190='?' (DbType = Int64), @p191='?', @p192='?' (DbType = DateTime), @p193='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:37:54.7722428+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:54.8185238+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:54.8851037+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:37:54.9285438+07:00
      Failed executing DbCommand (36ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = DateTime), @p118='?', @p119='?', @p120='?', @p121='?', @p122='?', @p123='?' (DbType = Guid), @p124='?' (DbType = Guid), @p125='?' (DbType = DateTime), @p126='?' (DbType = Guid), @p127='?' (DbType = Guid), @p128='?' (DbType = Guid), @p129='?' (DbType = DateTime), @p130='?', @p131='?', @p132='?', @p133='?', @p134='?', @p135='?' (DbType = Guid), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime), @p138='?' (DbType = Guid), @p139='?' (DbType = Guid), @p140='?' (DbType = Guid), @p141='?' (DbType = Decimal), @p142='?', @p143='?' (DbType = DateTime), @p144='?' (DbType = Decimal), @p145='?' (DbType = Decimal), @p146='?' (DbType = Decimal), @p147='?', @p148='?' (DbType = DateTime), @p149='?' (DbType = Guid), @p150='?', @p151='?' (DbType = Int64), @p152='?', @p153='?' (DbType = DateTime), @p154='?' (DbType = Guid), @p155='?' (DbType = Guid), @p156='?' (DbType = Guid), @p157='?' (DbType = Guid), @p158='?' (DbType = Decimal), @p159='?', @p160='?' (DbType = DateTime), @p161='?' (DbType = Decimal), @p162='?' (DbType = Decimal), @p163='?' (DbType = Decimal), @p164='?', @p165='?' (DbType = DateTime), @p166='?' (DbType = Guid), @p167='?', @p168='?' (DbType = Int64), @p169='?', @p170='?' (DbType = DateTime), @p171='?' (DbType = Guid), @p172='?' (DbType = Guid), @p173='?' (DbType = Guid), @p174='?' (DbType = Guid), @p175='?' (DbType = Decimal), @p176='?', @p177='?' (DbType = DateTime), @p178='?' (DbType = Decimal), @p179='?' (DbType = Decimal), @p180='?' (DbType = Decimal), @p181='?', @p182='?' (DbType = DateTime), @p183='?' (DbType = Guid), @p184='?', @p185='?' (DbType = Int64), @p186='?', @p187='?' (DbType = DateTime), @p188='?' (DbType = Guid), @p189='?' (DbType = Guid), @p190='?' (DbType = Guid), @p191='?' (DbType = Guid), @p192='?' (DbType = Decimal), @p193='?', @p194='?' (DbType = DateTime), @p195='?' (DbType = Decimal), @p196='?' (DbType = Decimal), @p197='?' (DbType = Decimal), @p198='?', @p199='?' (DbType = DateTime), @p200='?' (DbType = Guid), @p201='?', @p202='?' (DbType = Int64), @p203='?', @p204='?' (DbType = DateTime), @p205='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:37:54.9673223+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult()
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:54.9981572+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:37:54.9987638+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:37:54.9987946+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"d776628b80b3407fa964df9f8c072d2e","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:39:18.5464469+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:39:18.5464856+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:39:18.5465250+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"b01080f1372b4f239b5e9116d7b4344a","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:39:18.5478870+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:39:18.5493941+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=b01080f1372b4f239b5e9116d7b4344a / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:39:18.5653934+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:39:18.5656628+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:39:18.5676765+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=b01080f1372b4f239b5e9116d7b4344a / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:39:21.4366779+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:39:27.9401213+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:39:28.4857573+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:39:35.9593192+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:39:59.0184168+07:00
      Failed executing DbCommand (39ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = DateTime), @p118='?', @p119='?', @p120='?', @p121='?', @p122='?', @p123='?' (DbType = Guid), @p124='?' (DbType = Guid), @p125='?' (DbType = DateTime), @p126='?' (DbType = Guid), @p127='?' (DbType = Guid), @p128='?' (DbType = Guid), @p129='?' (DbType = DateTime), @p130='?', @p131='?', @p132='?', @p133='?', @p134='?', @p135='?' (DbType = Guid), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime), @p138='?' (DbType = Guid), @p139='?' (DbType = Guid), @p140='?' (DbType = Guid), @p141='?' (DbType = Decimal), @p142='?', @p143='?' (DbType = DateTime), @p144='?' (DbType = Decimal), @p145='?' (DbType = Decimal), @p146='?' (DbType = Decimal), @p147='?', @p148='?' (DbType = DateTime), @p149='?' (DbType = Guid), @p150='?', @p151='?' (DbType = Int64), @p152='?', @p153='?' (DbType = DateTime), @p154='?' (DbType = Guid), @p155='?' (DbType = Guid), @p156='?' (DbType = Guid), @p157='?' (DbType = Guid), @p158='?' (DbType = Decimal), @p159='?', @p160='?' (DbType = DateTime), @p161='?' (DbType = Decimal), @p162='?' (DbType = Decimal), @p163='?' (DbType = Decimal), @p164='?', @p165='?' (DbType = DateTime), @p166='?' (DbType = Guid), @p167='?', @p168='?' (DbType = Int64), @p169='?', @p170='?' (DbType = DateTime), @p171='?' (DbType = Guid), @p172='?' (DbType = Guid), @p173='?' (DbType = Guid), @p174='?' (DbType = Guid), @p175='?' (DbType = Decimal), @p176='?', @p177='?' (DbType = DateTime), @p178='?' (DbType = Decimal), @p179='?' (DbType = Decimal), @p180='?' (DbType = Decimal), @p181='?', @p182='?' (DbType = DateTime), @p183='?' (DbType = Guid), @p184='?', @p185='?' (DbType = Int64), @p186='?', @p187='?' (DbType = DateTime), @p188='?' (DbType = Guid), @p189='?' (DbType = Guid), @p190='?' (DbType = Guid), @p191='?' (DbType = Guid), @p192='?' (DbType = Decimal), @p193='?', @p194='?' (DbType = DateTime), @p195='?' (DbType = Decimal), @p196='?' (DbType = Decimal), @p197='?' (DbType = Decimal), @p198='?', @p199='?' (DbType = DateTime), @p200='?' (DbType = Guid), @p201='?', @p202='?' (DbType = Int64), @p203='?', @p204='?' (DbType = DateTime), @p205='?' (DbType = Guid), @p206='?' (DbType = Guid), @p207='?' (DbType = Guid), @p208='?' (DbType = Guid), @p209='?' (DbType = Decimal), @p210='?', @p211='?' (DbType = DateTime), @p212='?' (DbType = Decimal), @p213='?' (DbType = Decimal), @p214='?' (DbType = Decimal), @p215='?', @p216='?' (DbType = DateTime), @p217='?' (DbType = Guid), @p218='?', @p219='?' (DbType = Int64), @p220='?', @p221='?' (DbType = DateTime), @p222='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p206, @p207, @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:39:59.0616125+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:26.8803049+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 150
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:26.8811149+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:26.9869597+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:40:27.0349061+07:00
      Failed executing DbCommand (40ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = DateTime), @p118='?', @p119='?', @p120='?', @p121='?', @p122='?', @p123='?' (DbType = Guid), @p124='?' (DbType = Guid), @p125='?' (DbType = DateTime), @p126='?' (DbType = Guid), @p127='?' (DbType = Guid), @p128='?' (DbType = Guid), @p129='?' (DbType = DateTime), @p130='?', @p131='?', @p132='?', @p133='?', @p134='?', @p135='?' (DbType = Guid), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime), @p138='?' (DbType = Guid), @p139='?' (DbType = Guid), @p140='?' (DbType = Guid), @p141='?' (DbType = DateTime), @p142='?', @p143='?', @p144='?', @p145='?', @p146='?', @p147='?' (DbType = Guid), @p148='?' (DbType = Guid), @p149='?' (DbType = DateTime), @p150='?' (DbType = Guid), @p151='?' (DbType = Guid), @p152='?' (DbType = Guid), @p153='?' (DbType = Decimal), @p154='?', @p155='?' (DbType = DateTime), @p156='?' (DbType = Decimal), @p157='?' (DbType = Decimal), @p158='?' (DbType = Decimal), @p159='?', @p160='?' (DbType = DateTime), @p161='?' (DbType = Guid), @p162='?', @p163='?' (DbType = Int64), @p164='?', @p165='?' (DbType = DateTime), @p166='?' (DbType = Guid), @p167='?' (DbType = Guid), @p168='?' (DbType = Guid), @p169='?' (DbType = Guid), @p170='?' (DbType = Decimal), @p171='?', @p172='?' (DbType = DateTime), @p173='?' (DbType = Decimal), @p174='?' (DbType = Decimal), @p175='?' (DbType = Decimal), @p176='?', @p177='?' (DbType = DateTime), @p178='?' (DbType = Guid), @p179='?', @p180='?' (DbType = Int64), @p181='?', @p182='?' (DbType = DateTime), @p183='?' (DbType = Guid), @p184='?' (DbType = Guid), @p185='?' (DbType = Guid), @p186='?' (DbType = Guid), @p187='?' (DbType = Decimal), @p188='?', @p189='?' (DbType = DateTime), @p190='?' (DbType = Decimal), @p191='?' (DbType = Decimal), @p192='?' (DbType = Decimal), @p193='?', @p194='?' (DbType = DateTime), @p195='?' (DbType = Guid), @p196='?', @p197='?' (DbType = Int64), @p198='?', @p199='?' (DbType = DateTime), @p200='?' (DbType = Guid), @p201='?' (DbType = Guid), @p202='?' (DbType = Guid), @p203='?' (DbType = Guid), @p204='?' (DbType = Decimal), @p205='?', @p206='?' (DbType = DateTime), @p207='?' (DbType = Decimal), @p208='?' (DbType = Decimal), @p209='?' (DbType = Decimal), @p210='?', @p211='?' (DbType = DateTime), @p212='?' (DbType = Guid), @p213='?', @p214='?' (DbType = Int64), @p215='?', @p216='?' (DbType = DateTime), @p217='?' (DbType = Guid), @p218='?' (DbType = Guid), @p219='?' (DbType = Guid), @p220='?' (DbType = Guid), @p221='?' (DbType = Decimal), @p222='?', @p223='?' (DbType = DateTime), @p224='?' (DbType = Decimal), @p225='?' (DbType = Decimal), @p226='?' (DbType = Decimal), @p227='?', @p228='?' (DbType = DateTime), @p229='?' (DbType = Guid), @p230='?', @p231='?' (DbType = Int64), @p232='?', @p233='?' (DbType = DateTime), @p234='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p218, @p219, @p220, @p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:40:27.0749875+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:27.1028494+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:27.1746556+07:00
      MessageLog => Writing entry 'StartTransaction'
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:40:27.2193657+07:00
      Failed executing DbCommand (36ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = DateTime), @p118='?', @p119='?', @p120='?', @p121='?', @p122='?', @p123='?' (DbType = Guid), @p124='?' (DbType = Guid), @p125='?' (DbType = DateTime), @p126='?' (DbType = Guid), @p127='?' (DbType = Guid), @p128='?' (DbType = Guid), @p129='?' (DbType = DateTime), @p130='?', @p131='?', @p132='?', @p133='?', @p134='?', @p135='?' (DbType = Guid), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime), @p138='?' (DbType = Guid), @p139='?' (DbType = Guid), @p140='?' (DbType = Guid), @p141='?' (DbType = DateTime), @p142='?', @p143='?', @p144='?', @p145='?', @p146='?', @p147='?' (DbType = Guid), @p148='?' (DbType = Guid), @p149='?' (DbType = DateTime), @p150='?' (DbType = Guid), @p151='?' (DbType = Guid), @p152='?' (DbType = Guid), @p153='?' (DbType = DateTime), @p154='?', @p155='?', @p156='?', @p157='?', @p158='?', @p159='?' (DbType = Guid), @p160='?' (DbType = Guid), @p161='?' (DbType = DateTime), @p162='?' (DbType = Guid), @p163='?' (DbType = Guid), @p164='?' (DbType = Guid), @p165='?' (DbType = Decimal), @p166='?', @p167='?' (DbType = DateTime), @p168='?' (DbType = Decimal), @p169='?' (DbType = Decimal), @p170='?' (DbType = Decimal), @p171='?', @p172='?' (DbType = DateTime), @p173='?' (DbType = Guid), @p174='?', @p175='?' (DbType = Int64), @p176='?', @p177='?' (DbType = DateTime), @p178='?' (DbType = Guid), @p179='?' (DbType = Guid), @p180='?' (DbType = Guid), @p181='?' (DbType = Guid), @p182='?' (DbType = Decimal), @p183='?', @p184='?' (DbType = DateTime), @p185='?' (DbType = Decimal), @p186='?' (DbType = Decimal), @p187='?' (DbType = Decimal), @p188='?', @p189='?' (DbType = DateTime), @p190='?' (DbType = Guid), @p191='?', @p192='?' (DbType = Int64), @p193='?', @p194='?' (DbType = DateTime), @p195='?' (DbType = Guid), @p196='?' (DbType = Guid), @p197='?' (DbType = Guid), @p198='?' (DbType = Guid), @p199='?' (DbType = Decimal), @p200='?', @p201='?' (DbType = DateTime), @p202='?' (DbType = Decimal), @p203='?' (DbType = Decimal), @p204='?' (DbType = Decimal), @p205='?', @p206='?' (DbType = DateTime), @p207='?' (DbType = Guid), @p208='?', @p209='?' (DbType = Int64), @p210='?', @p211='?' (DbType = DateTime), @p212='?' (DbType = Guid), @p213='?' (DbType = Guid), @p214='?' (DbType = Guid), @p215='?' (DbType = Guid), @p216='?' (DbType = Decimal), @p217='?', @p218='?' (DbType = DateTime), @p219='?' (DbType = Decimal), @p220='?' (DbType = Decimal), @p221='?' (DbType = Decimal), @p222='?', @p223='?' (DbType = DateTime), @p224='?' (DbType = Guid), @p225='?', @p226='?' (DbType = Int64), @p227='?', @p228='?' (DbType = DateTime), @p229='?' (DbType = Guid), @p230='?' (DbType = Guid), @p231='?' (DbType = Guid), @p232='?' (DbType = Guid), @p233='?' (DbType = Decimal), @p234='?', @p235='?' (DbType = DateTime), @p236='?' (DbType = Decimal), @p237='?' (DbType = Decimal), @p238='?' (DbType = Decimal), @p239='?', @p240='?' (DbType = DateTime), @p241='?' (DbType = Guid), @p242='?', @p243='?' (DbType = Int64), @p244='?', @p245='?' (DbType = DateTime), @p246='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239, @p240, @p241, @p242, @p243, @p244, @p245, @p246)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:40:27.2597320+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
         at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:27.2868038+07:00
      MessageLog => Error writing entry 'StartTransaction'
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at OCPP.Core.Server.ControllerOCPP16.WriteMessageLog(String chargePointId, Nullable`1 connectorId, String state, String type, String message, String result, String errorCode) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.cs:line 227
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:27.2873953+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:27.2874214+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"b01080f1372b4f239b5e9116d7b4344a","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:44.4757474+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:44.4758631+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:44.4759619+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"73a9bed993a84cbb8f31c450abad89bd","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:44.4809050+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:44.4871683+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=73a9bed993a84cbb8f31c450abad89bd / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:44.5086213+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:44.5089014+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:40:44.5116385+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=73a9bed993a84cbb8f31c450abad89bd / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:44.9137161+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:44.9140963+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:44.9141058+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:40:45.7717233+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: Microsoft.EntityFrameworkCore.Database.Command[Microsoft.EntityFrameworkCore.Database.Command.CommandError] @ 2025-07-29T01:40:46.6084046+07:00
      Failed executing DbCommand (38ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?' (DbType = Decimal), @p13='?' (DbType = Guid), @p14='?', @p15='?' (DbType = Guid), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime), @p18='?' (DbType = Guid), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (DbType = DateTime), @p22='?', @p23='?', @p24='?', @p25='?', @p26='?', @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = DateTime), @p30='?' (DbType = Guid), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (DbType = DateTime), @p34='?', @p35='?', @p36='?', @p37='?', @p38='?', @p39='?' (DbType = Guid), @p40='?' (DbType = Guid), @p41='?' (DbType = DateTime), @p42='?' (DbType = Guid), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (DbType = DateTime), @p46='?', @p47='?', @p48='?', @p49='?', @p50='?', @p51='?' (DbType = Guid), @p52='?' (DbType = Guid), @p53='?' (DbType = DateTime), @p54='?' (DbType = Guid), @p55='?' (DbType = Guid), @p56='?' (DbType = Guid), @p57='?' (DbType = DateTime), @p58='?', @p59='?', @p60='?', @p61='?', @p62='?', @p63='?' (DbType = Guid), @p64='?' (DbType = Guid), @p65='?' (DbType = DateTime), @p66='?' (DbType = Guid), @p67='?' (DbType = Guid), @p68='?' (DbType = Guid), @p69='?' (DbType = DateTime), @p70='?', @p71='?', @p72='?', @p73='?', @p74='?', @p75='?' (DbType = Guid), @p76='?' (DbType = Guid), @p77='?' (DbType = DateTime), @p78='?' (DbType = Guid), @p79='?' (DbType = Guid), @p80='?' (DbType = Guid), @p81='?' (DbType = DateTime), @p82='?', @p83='?', @p84='?', @p85='?', @p86='?', @p87='?' (DbType = Guid), @p88='?' (DbType = Guid), @p89='?' (DbType = DateTime), @p90='?' (DbType = Guid), @p91='?' (DbType = Guid), @p92='?' (DbType = Guid), @p93='?' (DbType = DateTime), @p94='?', @p95='?', @p96='?', @p97='?', @p98='?', @p99='?' (DbType = Guid), @p100='?' (DbType = Guid), @p101='?' (DbType = DateTime), @p102='?' (DbType = Guid), @p103='?' (DbType = Guid), @p104='?' (DbType = Guid), @p105='?' (DbType = DateTime), @p106='?', @p107='?', @p108='?', @p109='?', @p110='?', @p111='?' (DbType = Guid), @p112='?' (DbType = Guid), @p113='?' (DbType = DateTime), @p114='?' (DbType = Guid), @p115='?' (DbType = Guid), @p116='?' (DbType = Guid), @p117='?' (DbType = DateTime), @p118='?', @p119='?', @p120='?', @p121='?', @p122='?', @p123='?' (DbType = Guid), @p124='?' (DbType = Guid), @p125='?' (DbType = DateTime), @p126='?' (DbType = Guid), @p127='?' (DbType = Guid), @p128='?' (DbType = Guid), @p129='?' (DbType = DateTime), @p130='?', @p131='?', @p132='?', @p133='?', @p134='?', @p135='?' (DbType = Guid), @p136='?' (DbType = Guid), @p137='?' (DbType = DateTime), @p138='?' (DbType = Guid), @p139='?' (DbType = Guid), @p140='?' (DbType = Guid), @p141='?' (DbType = DateTime), @p142='?', @p143='?', @p144='?', @p145='?', @p146='?', @p147='?' (DbType = Guid), @p148='?' (DbType = Guid), @p149='?' (DbType = DateTime), @p150='?' (DbType = Guid), @p151='?' (DbType = Guid), @p152='?' (DbType = Guid), @p153='?' (DbType = DateTime), @p154='?', @p155='?', @p156='?', @p157='?', @p158='?', @p159='?' (DbType = Guid), @p160='?' (DbType = Guid), @p161='?' (DbType = DateTime), @p162='?' (DbType = Guid), @p163='?' (DbType = Guid), @p164='?' (DbType = Guid), @p165='?' (DbType = Decimal), @p166='?', @p167='?' (DbType = DateTime), @p168='?' (DbType = Decimal), @p169='?' (DbType = Decimal), @p170='?' (DbType = Decimal), @p171='?', @p172='?' (DbType = DateTime), @p173='?' (DbType = Guid), @p174='?', @p175='?' (DbType = Int64), @p176='?', @p177='?' (DbType = DateTime), @p178='?' (DbType = Guid), @p179='?' (DbType = Guid), @p180='?' (DbType = Guid), @p181='?' (DbType = Guid), @p182='?' (DbType = Decimal), @p183='?', @p184='?' (DbType = DateTime), @p185='?' (DbType = Decimal), @p186='?' (DbType = Decimal), @p187='?' (DbType = Decimal), @p188='?', @p189='?' (DbType = DateTime), @p190='?' (DbType = Guid), @p191='?', @p192='?' (DbType = Int64), @p193='?', @p194='?' (DbType = DateTime), @p195='?' (DbType = Guid), @p196='?' (DbType = Guid), @p197='?' (DbType = Guid), @p198='?' (DbType = Guid), @p199='?' (DbType = Decimal), @p200='?', @p201='?' (DbType = DateTime), @p202='?' (DbType = Decimal), @p203='?' (DbType = Decimal), @p204='?' (DbType = Decimal), @p205='?', @p206='?' (DbType = DateTime), @p207='?' (DbType = Guid), @p208='?', @p209='?' (DbType = Int64), @p210='?', @p211='?' (DbType = DateTime), @p212='?' (DbType = Guid), @p213='?' (DbType = Guid), @p214='?' (DbType = Guid), @p215='?' (DbType = Guid), @p216='?' (DbType = Decimal), @p217='?', @p218='?' (DbType = DateTime), @p219='?' (DbType = Decimal), @p220='?' (DbType = Decimal), @p221='?' (DbType = Decimal), @p222='?', @p223='?' (DbType = DateTime), @p224='?' (DbType = Guid), @p225='?', @p226='?' (DbType = Int64), @p227='?', @p228='?' (DbType = DateTime), @p229='?' (DbType = Guid), @p230='?' (DbType = Guid), @p231='?' (DbType = Guid), @p232='?' (DbType = Guid), @p233='?' (DbType = Decimal), @p234='?', @p235='?' (DbType = DateTime), @p236='?' (DbType = Decimal), @p237='?' (DbType = Decimal), @p238='?' (DbType = Decimal), @p239='?', @p240='?' (DbType = DateTime), @p241='?' (DbType = Guid), @p242='?', @p243='?' (DbType = Int64), @p244='?', @p245='?' (DbType = DateTime), @p246='?' (DbType = Guid), @p247='?' (DbType = Guid), @p248='?' (DbType = Guid), @p249='?' (DbType = Guid), @p250='?' (DbType = Decimal), @p251='?', @p252='?' (DbType = DateTime), @p253='?' (DbType = Decimal), @p254='?' (DbType = Decimal), @p255='?' (DbType = Decimal), @p256='?', @p257='?' (DbType = DateTime), @p258='?' (DbType = Guid), @p259='?', @p260='?' (DbType = Int64), @p261='?', @p262='?' (DbType = DateTime), @p263='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
      INSERT INTO info.tbl_connector_status (f_id, f_charger_id, f_code, f_connector_id, f_createby, f_created, f_current_charge_kw, f_current_meter, f_current_meter_time, f_current_status, f_current_status_time, f_name, f_state_of_charge, f_station_id, f_status, f_transaction_id, f_updateby, f_updated)
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149)
      RETURNING f_id, f_created, f_status;
      INSERT INTO log.tbl_message_log (f_charger_id, f_connector_id, f_createby, f_date, f_error_code, f_log_state, f_log_type, f_message, f_result, f_station_id, f_updateby, f_updated)
      VALUES (@p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161)
      RETURNING f_id, f_created, f_status;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239, @p240, @p241, @p242, @p243, @p244, @p245, @p246)
      RETURNING f_id, f_created;
      INSERT INTO transaction.tbl_transaction (f_card_id, f_charger_id, f_connector_id, f_cost, f_end_result, f_end_time, f_meter_end, f_meter_start, f_pre_meter, f_start_result, f_start_time, f_station_id, f_status, f_transaction_no, f_transaction_status, f_updated, f_user_id)
      VALUES (@p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255, @p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263)
      RETURNING f_id, f_created;
fail: Microsoft.EntityFrameworkCore.Update[Microsoft.EntityFrameworkCore.Update.SaveChangesFailed] @ 2025-07-29T01:40:46.6511313+07:00
      An exception occurred in the database while saving changes for context type 'OCPP.Core.Server.NpgsqlDbContext'.
      Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
       ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"
      
      DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
         at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
         at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
         at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
        Exception data:
          Severity: ERROR
          SqlState: 23505
          MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
          Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
          SchemaName: info
          TableName: tbl_connector_status
          ConstraintName: tbl_connector_status_pkey
          File: nbtinsert.c
          Line: 666
          Routine: _bt_check_unique
         --- End of inner exception stack trace ---
         at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
         at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "tbl_connector_status_pkey"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "tbl_connector_status_pkey"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: info
    TableName: tbl_connector_status
    ConstraintName: tbl_connector_status_pkey
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T01:41:32.7359518+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T01:41:33.0707151+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T01:41:33.8308804+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T01:41:34.5245959+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T01:41:45.1871863+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T01:41:46.3359906+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T01:41:46.3382024+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T01:41:46.3407446+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T01:41:46.3408211+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T01:41:46.3437252+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:41:46.3685946+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:41:46.3742939+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=73a9bed993a84cbb8f31c450abad89bd / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:41:46.3893374+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:41:46.4372519+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:41:46.4372909+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:41:46.4424245+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:41:46.6185411+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"73a9bed993a84cbb8f31c450abad89bd",{"status":"Accepted","currentTime":"2025-07-29T01:41:46.4373076+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:05.1029110+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:05.1030006+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:05.1031335+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"a52b92797bf34b269be894503ad07ef0","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:05.1062658+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:05.1089782+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=a52b92797bf34b269be894503ad07ef0 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:05.1518881+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:05.1528837+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:05.1553781+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a52b92797bf34b269be894503ad07ef0 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:10.2941164+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:10.3012844+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:10.3013199+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:35.1527241+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:50.6495165+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:50.7741780+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:42:50.9005522+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:42:50.9390063+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"a52b92797bf34b269be894503ad07ef0",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728184245}]
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T01:44:37.5089244+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T01:52:35.2958329+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T01:52:35.6822771+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T01:52:36.4701495+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T01:52:36.9567808+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T01:52:49.0022637+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T01:52:50.1075931+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T01:52:50.1101662+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T01:52:50.1120783+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T01:52:50.1121143+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T01:52:50.1147261+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:52:50.1385945+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:52:50.1444709+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a52b92797bf34b269be894503ad07ef0 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:52:50.1625801+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:52:50.2090213+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:52:50.2090548+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T01:52:50.2135254+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T01:52:50.4021363+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"a52b92797bf34b269be894503ad07ef0",{"status":"Accepted","currentTime":"2025-07-29T01:52:50.2090704+07:00","interval":300}]
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[UnhandledException] @ 2025-07-29T01:53:41.1424553+07:00
      An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception was thrown while attempting to evaluate a LINQ query parameter expression. See the inner exception for more information. To show additional information call 'DbContextOptionsBuilder.EnableSensitiveDataLogging'.
 ---> System.FormatException: Unrecognized Guid format.
   at System.Guid.GuidResult.SetFailure(ParseFailure failureKind)
   at System.Guid.TryParseGuid(ReadOnlySpan`1 guidString, GuidResult& result)
   at System.Guid.Parse(ReadOnlySpan`1 input)
   at System.Guid.Parse(String input)
   at System.Linq.Expressions.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at System.Linq.Expressions.Interpreter.LightLambda.Run(Object[] arguments)
   at System.Dynamic.Utils.DelegateHelpers.FuncThunk[TReturn](Func`2 handler)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.GetValue(Expression expression, String& parameterName)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Evaluate(Expression expression, Boolean generateParameter)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitBinary(BinaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitBinary(BinaryExpression binaryExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitLambda[T](Expression`1 node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Linq.Expressions.ExpressionVisitor.VisitUnary(UnaryExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at System.Dynamic.Utils.ExpressionVisitorUtils.VisitArguments(ExpressionVisitor visitor, IArgumentProvider nodes)
   at System.Linq.Expressions.ExpressionVisitor.VisitMethodCall(MethodCallExpression node)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression, Boolean clearEvaluatedValues)
   at Microsoft.EntityFrameworkCore.Query.Internal.ParameterExtractingExpressionVisitor.ExtractParameters(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExtractParameters(Expression query, IParameterValues parameterValues, IDiagnosticsLogger`1 logger, Boolean parameterize, Boolean generateContextAccessors)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at OCPP.Core.Server.OCPPMiddleware.RemoteStopTransaction16(ChargePointStatus chargePointStatus, HttpContext apiCallerContext, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.OCPP16.cs:line 679
   at OCPP.Core.Server.OCPPMiddleware.Invoke(HttpContext context, NpgsqlDbContext dbContext) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\OCPPMiddleware.cs:line 432
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T02:00:07.3406513+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T02:00:07.6655870+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T02:00:08.7852457+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T02:00:09.4232578+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T02:00:18.5588403+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T02:00:20.0449262+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T02:00:20.0492232+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T02:00:20.0510187+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T02:00:20.0510482+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T02:00:20.0539506+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:00:20.0829617+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:00:20.0897836+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a52b92797bf34b269be894503ad07ef0 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:00:20.1140480+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:00:20.1582412+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:00:20.1582848+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:00:20.1630945+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:00:20.3760384+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"a52b92797bf34b269be894503ad07ef0",{"status":"Accepted","currentTime":"2025-07-29T02:00:20.1582987+07:00","interval":300}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T02:01:18.1672881+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T02:01:18.5033180+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T02:01:19.9134874+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T02:01:20.8843837+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T02:01:34.2474037+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T02:01:35.5955557+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T02:01:35.5989561+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T02:01:35.6012663+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T02:01:35.6013041+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T02:01:35.6051136+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:01:35.6353604+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:01:35.6427081+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a52b92797bf34b269be894503ad07ef0 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:01:35.6674971+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:01:35.7252793+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:01:35.7253177+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:01:35.7300449+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:01:35.9364918+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"a52b92797bf34b269be894503ad07ef0",{"status":"Accepted","currentTime":"2025-07-29T02:01:35.7253323+07:00","interval":300}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T02:03:59.6003072+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T02:03:59.8770553+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T02:04:00.7289039+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T02:04:01.3444086+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T02:04:34.8667753+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T02:04:36.0722626+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T02:04:36.0744976+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T02:04:36.0776696+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T02:04:36.0777283+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T02:04:36.0804229+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:04:36.1026040+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:04:36.1094232+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a52b92797bf34b269be894503ad07ef0 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:04:36.1287047+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:04:36.1814484+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:04:36.1814843+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:04:36.1868080+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:04:36.3884518+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"a52b92797bf34b269be894503ad07ef0",{"status":"Accepted","currentTime":"2025-07-29T02:04:36.181503+07:00","interval":300}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T02:07:31.9625011+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T02:07:32.2903753+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T02:07:33.0970591+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T02:07:33.7256238+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T02:07:49.1121517+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T02:07:50.2665783+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T02:07:50.2689153+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T02:07:50.2707580+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T02:07:50.2708016+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T02:07:50.2731223+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:07:50.2929682+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:07:50.2984013+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=a52b92797bf34b269be894503ad07ef0 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:07:50.3138111+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:07:50.3578617+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:07:50.3579168+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:07:50.3690934+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:07:50.5251001+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"a52b92797bf34b269be894503ad07ef0",{"status":"Accepted","currentTime":"2025-07-29T02:07:50.3579335+07:00","interval":300}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:08:19.6664744+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"cd6229b01d2443b6a3ce4ac590415f10","RemoteStopTransaction",{"transactionId":20250728184245}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:08:21.2206352+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:08:21.2224674+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=cd6229b01d2443b6a3ce4ac590415f10 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:11:24.9784550+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:11:32.0700015+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 177 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:11:32.0731048+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=cd6229b01d2443b6a3ce4ac590415f10 / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:11:32.0768372+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:11:32.0866527+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:11:32.0866908+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:11:35.5137450+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:11:38.6063527+07:00
      UpdateConnectorStatus => Save ConnectorStatus: ID=473d9003-023b-474b-b37e-71d64b978474 / Connector=2 / Status=Available / Meter=9.999
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:11:39.7418346+07:00
      StopTransaction => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:11:39.9165976+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"cd6229b01d2443b6a3ce4ac590415f10",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","status":"Accepted"}}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:12:36.6147006+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:12:36.6147625+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:12:36.6148489+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"2de0b5dff29d4e429053fba814d72dac","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:12:36.6167596+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:12:36.6195764+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=2de0b5dff29d4e429053fba814d72dac / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:12:36.6432519+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:12:36.6436494+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:12:36.6463851+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2de0b5dff29d4e429053fba814d72dac / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:12:36.6506661+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:12:36.6546436+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:12:36.6546812+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:12:48.0745394+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:13:52.8983217+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblConnectorStatus' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 153
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:13:52.8993712+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:13:53.0198658+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:13:53.1655620+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:13:53.1662329+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:13:53.1663265+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"2de0b5dff29d4e429053fba814d72dac","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.0174712+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.0175219+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.0175752+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"7a63c5d661ea412ab10078d8241422bb","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.0191157+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.0228911+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=7a63c5d661ea412ab10078d8241422bb / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.0409227+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.0413382+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.0436494+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=7a63c5d661ea412ab10078d8241422bb / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.0441457+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.0454289+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.0454456+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.0825349+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.2427621+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblTransaction' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 162
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.2430987+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.3135074+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.4564126+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:13.4911060+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:13.4911777+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"7a63c5d661ea412ab10078d8241422bb","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.0730427+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.0731025+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.0731580+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"478c1d64036e4311a54def4189e9eaef","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.0743145+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.0764400+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=478c1d64036e4311a54def4189e9eaef / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.0924499+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.0928901+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.0955383+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=478c1d64036e4311a54def4189e9eaef / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.0962100+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.0972559+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.0972719+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.1345356+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.2882954+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblTransaction' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 162
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.2885787+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.3598670+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.4990619+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:14:34.5361926+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:14:34.5362389+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"478c1d64036e4311a54def4189e9eaef","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:15:32.8710092+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:15:32.8710384+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:15:32.8710638+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"2aec98bb73cc48849a9bea94775dbd18","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:15:32.8726007+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:15:32.8748195+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=2aec98bb73cc48849a9bea94775dbd18 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:15:32.8907740+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:15:32.8912293+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:15:32.8933864+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2aec98bb73cc48849a9bea94775dbd18 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:15:32.8937790+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:15:32.8943866+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:15:32.8943948+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:15:32.9325074+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:16:44.8013278+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblConnectorStatus' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:16:44.8928289+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:16:45.0011306+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:16:45.1411025+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:16:45.1835563+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:16:45.1835952+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"2aec98bb73cc48849a9bea94775dbd18","InternalError","",{}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T02:16:56.6068757+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T02:16:56.8943750+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T02:16:57.5869458+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T02:16:58.1009203+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T02:17:23.4350248+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T02:17:24.5124520+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T02:17:24.5148316+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T02:17:24.5163158+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T02:17:24.5163447+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T02:17:24.5183105+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:24.5454544+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:24.5522671+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=2aec98bb73cc48849a9bea94775dbd18 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:24.5782581+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:24.6318019+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:24.6318882+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:24.6377740+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:24.8249731+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"2aec98bb73cc48849a9bea94775dbd18",{"status":"Accepted","currentTime":"2025-07-29T02:17:24.6319288+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:29.4058936+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:29.4060638+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:29.4061791+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"20a01e5045c546ae85beeb4648c14d16","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:29.4092487+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:29.4107298+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=20a01e5045c546ae85beeb4648c14d16 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:29.4513947+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:29.4523116+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:29.4543466+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=20a01e5045c546ae85beeb4648c14d16 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:29.4593822+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:29.4657842+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:29.4658194+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:29.5375715+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:29.8415232+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:29.9578762+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:17:30.1030794+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:17:30.1382604+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"20a01e5045c546ae85beeb4648c14d16",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728191533}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:03.8272912+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:03.8273716+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:03.8274385+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"60774c446b624a1b9488e10108fad298","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:03.8292634+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:03.8316937+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=60774c446b624a1b9488e10108fad298 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:03.8495916+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:03.8499859+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:03.8525134+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=60774c446b624a1b9488e10108fad298 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:03.8530868+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:03.8539124+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:03.8539264+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:03.8952316+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:27.9666118+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblConnectorStatus' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut) in D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\ControllerOCPP16.StartTransaction.cs:line 153
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:27.9672403+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:28.1286487+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:28.3478616+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:18:28.3486186+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:18:28.3487850+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"60774c446b624a1b9488e10108fad298","InternalError","",{}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.1655275+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.1655726+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.1656103+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"5e96c364d39b4d61b2f27aa55a964267","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.1678267+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.1738011+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=5e96c364d39b4d61b2f27aa55a964267 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.1931063+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.1934638+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.1960448+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=5e96c364d39b4d61b2f27aa55a964267 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.1998645+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.2003428+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.2003581+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.2354980+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
fail: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.4179159+07:00
      StartTransaction => Exception writing transaction: chargepoint=Test1234 / tag=11001122
System.InvalidOperationException: The instance of entity type 'TblTransaction' cannot be tracked because another instance with the same key value for {'FId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at OCPP.Core.Server.ControllerOCPP16.HandleStartTransaction(OCPPMessage msgIn, OCPPMessage msgOut)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.4182371+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.4877848+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.6254146+07:00
      MessageLog => Writing entry 'StartTransaction'
dbug: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:07.6614809+07:00
      ControllerOCPP16 => Return error code messge: ErrorCode=InternalError
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:07.6615269+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [4,"5e96c364d39b4d61b2f27aa55a964267","InternalError","",{}]
trce: OCPP.Core.Server.Startup[0] @ 2025-07-29T02:21:40.4429878+07:00
      Startup => Configure(...)
warn: Microsoft.AspNetCore.Server.Kestrel[0] @ 2025-07-29T02:21:40.7470445+07:00
      Overriding address(es) 'http://0.0.0.0:8003, https://0.0.0.0:8004'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
trce: OCPPMiddleware[0] @ 2025-07-29T02:21:41.7991087+07:00
      OCPPMiddleware => Index status page
warn: OCPPMiddleware[0] @ 2025-07-29T02:21:42.3717828+07:00
      OCPPMiddleware => Bad path request
info: OCPPMiddleware[0] @ 2025-07-29T02:21:54.3113916+07:00
      OCPPMiddleware => Connection request with chargepoint identifier = 'Test1234'
info: OCPPMiddleware[0] @ 2025-07-29T02:21:55.5261817+07:00
      OCPPMiddleware => SUCCESS: Found chargepoint with identifier=473d9003-023b-474b-b37e-71d64b978474
info: OCPPMiddleware[0] @ 2025-07-29T02:21:55.5282924+07:00
      OCPPMiddleware => No authentication for chargepoint '473d9003-023b-474b-b37e-71d64b978474' configured
trce: OCPPMiddleware[0] @ 2025-07-29T02:21:55.5298155+07:00
      OCPPMiddleware => Store/Update status object
trce: OCPPMiddleware[0] @ 2025-07-29T02:21:55.5298622+07:00
      OCPPMiddleware => Waiting for message...
trce: OCPPMiddleware[0] @ 2025-07-29T02:21:55.5318170+07:00
      OCPPMiddleware => WebSocket connection with charge point 'Test1234'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:55.5508119+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 322 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:55.5566522+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=5e96c364d39b4d61b2f27aa55a964267 / Action=BootNotification)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:55.5737482+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\BootNotificationRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:55.6226818+07:00
      Processing boot notification...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:55.6227176+07:00
      BootNotification => Message deserialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:21:55.6275197+07:00
      BootNotification => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:21:55.7894180+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"5e96c364d39b4d61b2f27aa55a964267",{"status":"Accepted","currentTime":"2025-07-29T02:21:55.6227336+07:00","interval":300}]
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:00.5647313+07:00
      RemoteStartTransaction => Save ConnectorStatus: ID=Test1234 / Connector=2 
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:00.5648332+07:00
      RemoteStartTransaction => Response serialized Data:{"connectorId":2,"idTag":"B4A63CDF"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:00.5649898+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"1face4ef7ce84aa7897e168a0aa29f41","RemoteStartTransaction",{"connectorId":2,"idTag":"B4A63CDF"}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:00.5683887+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:00.5703033+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=1face4ef7ce84aa7897e168a0aa29f41 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:00.6108660+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:00.6117798+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 165 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:00.6139060+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=1face4ef7ce84aa7897e168a0aa29f41 / Action=StartTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:00.6175257+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StartTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:00.6237243+07:00
      Processing startTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:00.6238238+07:00
      StartTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:00.7016748+07:00
      StartTransaction => Charge tag='11001122' => Status: Accepted
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:06.6713894+07:00
      StartTransaction => Response serialized
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:06.8047689+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:22:06.9305764+07:00
      MessageLog => Writing entry 'StartTransaction'
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:22:06.9664593+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"1face4ef7ce84aa7897e168a0aa29f41",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","parentIdTag":"","status":"Accepted"},"transactionId":20250728192200}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:23:34.0750292+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [2,"efde056e6cd346eabe834b6748349322","RemoteStopTransaction",{"transactionId":20250728192200}]
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:23:34.0772461+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 60 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:23:34.0809930+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=3 / ID=efde056e6cd346eabe834b6748349322 / Action=)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:25:42.1185552+07:00
      HandleReset => API response: {"status": "Accepted"}
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:25:51.8990122+07:00
      OCPPMiddleware.Receive16 => Receiving segment: 177 bytes (EndOfMessage=True / MsgType=Text)
info: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:25:51.9023260+07:00
      OCPPMiddleware.Receive16 => OCPP-Message: Type=2 / ID=efde056e6cd346eabe834b6748349322 / Action=StopTransaction)
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:25:51.9051606+07:00
      DeserializeMessage => Using schema file: D:\New Proj\@งานนอก\_ev\_evnew\chargeme-app\OCPP.Core\OCPP.Core.Server\bin\Debug\net8.0\Schema16\StopTransactionRequest.json
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:25:51.9116735+07:00
      Processing stopTransaction request...
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:25:51.9116863+07:00
      StopTransaction => Message deserialized
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:25:58.6719030+07:00
      StopTransaction => RFID-tag='11001122' => Status: Accepted
info: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:26:01.0063022+07:00
      UpdateConnectorStatus => Save ConnectorStatus: ID=473d9003-023b-474b-b37e-71d64b978474 / Connector=2 / Status=Available / Meter=9.999
trce: OCPP.Core.Server.ControllerOCPP16[0] @ 2025-07-29T02:26:02.0620839+07:00
      StopTransaction => Response serialized
trce: OCPPMiddleware.OCPP16[0] @ 2025-07-29T02:26:02.2483878+07:00
      OCPPMiddleware.OCPP16 => SendOcppMessage: [3,"efde056e6cd346eabe834b6748349322",{"idTagInfo":{"expiryDate":"2026-07-28T00:00:00+00:00","status":"Accepted"}}]
